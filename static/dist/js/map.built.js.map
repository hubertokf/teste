{"version":3,"sources":["../../js/map.js"],"names":["$selectExclude","$selectPokemonNotify","$selectRarityNotify","$textPerfectionNotify","$selectStyle","$selectIconSize","$switchOpenGymsOnly","$selectTeamGymsOnly","$selectLastUpdateGymsOnly","$selectMinGymLevel","$selectMaxGymLevel","$selectLuredPokestopsOnly","$selectSearchIconMarker","$selectLocationIconMarker","$switchGymSidebar","language","document","documentElement","lang","idToPokemon","i8lnDictionary","languageLookups","languageLookupThreshold","searchMarkerStyles","timestamp","excludedPokemon","notifiedPokemon","notifiedRarity","notifiedMinPerfection","buffer","reincludedPokemon","reids","map","rawDataIsLoading","locationMarker","rangeMarkers","searchMarker","storeZoom","moves","oSwLat","oSwLng","oNeLat","oNeLng","lastpokestops","lastgyms","lastpokemon","lastslocs","lastspawns","selectedStyle","updateWorker","lastUpdateTime","gymTypes","audio","Audio","genderType","unownForm","notifyIvTitle","notifyNoIvTitle","notifyText","excludePokemon","id","val","concat","trigger","notifyAboutPokemon","removePokemonMarker","encounterId","mapData","pokemons","marker","rangeCircle","setMap","hidden","initMap","google","maps","Map","getElementById","center","lat","Number","getParameterByName","centerLat","lng","centerLng","zoom","Store","get","fullscreenControl","streetViewControl","mapTypeControl","clickableIcons","mapTypeControlOptions","style","MapTypeControlStyle","DROPDOWN_MENU","position","ControlPosition","RIGHT_TOP","mapTypeIds","MapTypeId","ROADMAP","SATELLITE","HYBRID","styleNoLabels","StyledMapType","noLabelsStyle","name","mapTypes","set","styleDark","darkStyle","styleLight2","light2Style","stylePgo","pGoStyle","styleDarkNl","darkStyleNoLabels","styleLight2Nl","light2StyleNoLabels","stylePgoNl","pGoStyleNoLabels","stylePgoDay","pGoStyleDay","stylePgoNight","pGoStyleNight","currentDate","Date","currentHour","getHours","stylePgoDynamic","addListener","s","mapTypeId","setMapTypeId","updateMap","getZoom","redrawPokemon","lurePokemons","createSearchMarker","createLocationMarker","createMyLocationButton","initSidebar","$","on","loc","getCenter","changeLocation","checked","prop","searchControl","updateLocationMarker","url","icon","setIcon","scaledSize","Size","Marker","animation","Animation","DROP","draggable","optimized","zIndex","MAX_ZINDEX","infoWindow","InfoWindow","content","disableAutoPan","addListeners","event","newLocation","getPosition","updateSearchMarker","oldLocation","changeSearchLocation","done","fail","setPosition","searchControlURI","action","post","encodeURIComponent","toggleClass","updateSearchStatus","getJSON","then","data","status","toggle","searchBox","places","Autocomplete","css","length","setInterval","place","getPlace","geometry","location","getTypeSpan","type","openMapDirections","window","open","getDateStr","t","dateStr","moment","fromNow","pokemonLabel","item","rarityDisplay","types","typesDisplay","latitude","longitude","disappearTime","atk","def","sta","pMove1","undefined","i8ln","pMove2","weight","height","gender","form","cp","cpMultiplier","each","index","details","contentstring","formString","pokemonLevel","getPokemonLevel","iv","getIv","toFixed","isOngoingRaid","raid","now","end","start","gymLabel","gym","includeMembers","pokemonWithImages","raidStr","pokemon_id","lastScannedStr","last_scanned","lastModifiedStr","last_modified","slotsString","slots_available","teamColor","teamName","team_id","isUpcomingRaid","isRaidStarted","subtitle","image","imageLbl","navInfo","memberStr","gymPoints","total_cp","titleText","title","raidColor","levelStr","repeat","indexOf","getGymLevel","level","Math","floor","pokemon_types","pokemon","forEach","member","pokemon_name","cp_decayed","pokestopLabel","expireTime","str","formatSpawnTime","seconds","substr","spawnpointLabel","uncertain","appear_time","disappear_time","addRangeCircle","teamId","targetmap","circleCenter","LatLng","gymColors","range","circleColor","rangeCircleOpts","radius","strokeWeight","strokeColor","strokeOpacity","fillColor","fillOpacity","Circle","isRangeActive","stm","round","lpad","len","padstr","Array","max","String","join","repArray","text","find","replace","i","getTimeUntil","time","tdiff","sec","min","hour","getNotifyText","ntitle","dist","toLocaleString","minute","second","hour12","until","udist","ntext","playPokemonSound","pokemonID","play","audioCry","catch","err","console","log","customizePokemonMarker","skipNotification","setAnimation","animationDisabled","sendNotification","fav_title","fav_text","BOUNCE","perfection","setupGymMarker","updateGymMarker","gymSidebar","querySelector","getAttribute","classList","contains","remove","setAttribute","showGymDetails","persist","isMobileDevice","isTouchDevice","clearSelection","updateLabelDiffTime","close","setZIndex","setContent","setupPokestopMarker","imagename","getColorByDate","value","diff","hue","toString","setupScannedMarker","clickable","showConfig","getColorBySpawnTime","getMinutes","getSeconds","changeSpawnIcon","color","urlColor","zoomScale","minimumSize","newSize","newIcon","anchor","Point","spawnPointIndex","newIndex","scale","setupSpawnpointMarker","selection","empty","getSelection","removeAllRanges","infoWindowIsOpen","clearStaleMarkers","key","getTime","scanned","showInBoundsMarkers","markers","show","getBounds","intersects","getMap","oldAnimation","getAnimation","loadRawData","loadPokemon","loadGyms","loadPokestops","loadScanned","loadSpawnpoints","loadLuredOnly","Boolean","bounds","swPoint","getSouthWest","nePoint","getNorthEast","swLat","swLng","neLat","neLng","ajax","dataType","cache","beforeSend","error","toastr","options","complete","processPokemons","setupPokemonMarker","processPokestops","pokestops","item2","updatePokestops","removeStops","currentTime","push","processGyms","gymLevel","removeGymFromMap","gymid","gyms","processScanned","scanId","updateScanned","setOptions","processSpawnpoints","spawnpoints","updateSpawnPoints","result","hasClass","countMarkers","filter","e","pokemonList","newMarker","element","disappearsAt","parseInt","hours","minutes","timestring","ttime","getPointDistance","pointA","pointB","spherical","computeDistanceBetween","Notification","permission","requestPermission","notification","body","sound","onclick","focus","centerMap","locationContainer","createElement","locationButton","backgroundColor","border","outline","width","borderRadius","boxShadow","cursor","marginRight","padding","appendChild","locationIcon","margin","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","addEventListener","centerMapOnLocation","controls","RIGHT_BOTTOM","currentLocation","imgX","animationInterval","navigator","geolocation","getCurrentPosition","latlng","coords","setCenter","clearInterval","setZoom","word","isEmptyObject","async","success","jqXHR","updateGeoLocation","panTo","createUpdateWorker","Worker","updateBlob","Blob","updateBlobURL","URL","createObjectURL","onmessage","postMessage","ex","message","sidebar","sidebarClose","add","pokemonHtml","getSidebarGymMember","guard_pokemon_id","guard_pokemon_name","topPart","innerHTML","href","className","tabIndex","preventDefault","stopPropagation","perfectPercent","iv_attack","iv_defense","iv_stamina","moveEnergy","move_2_energy","trainer_name","trainer_level","deployment_time","move_1_name","move_1_type","toLowerCase","move_1_damage","move_2_name","move_2_type","move_2_damage","toggleGymPokemonDetails","lastElementChild","firstElementChild","nextElementSibling","search","regex","RegExp","results","exec","decodeURIComponent","styleList","select2","placeholder","minimumResultsForSearch","Infinity","d","dType","searchMarkerStyleList","selectSearchIconMarker","locale","formatState","state","$state","numberOfPokemon","pokeList","_types","pokemonType","templateResult","isNaN","buildSwitchChangeListener","storageKey","change","wrapper","hide","wrapper2","bind","criesWrapper","setDraggable","alert","accordion","active","collapsible","heightStyle","DataTable","paging","searching","info","errMode","order"],"mappings":"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","file":"map.built.js","sourcesContent":["//\n// Global map.js variables\n//\n\nvar $selectExclude\nvar $selectPokemonNotify\nvar $selectRarityNotify\nvar $textPerfectionNotify\nvar $selectStyle\nvar $selectIconSize\nvar $switchOpenGymsOnly\nvar $selectTeamGymsOnly\nvar $selectLastUpdateGymsOnly\nvar $selectMinGymLevel\nvar $selectMaxGymLevel\nvar $selectLuredPokestopsOnly\nvar $selectSearchIconMarker\nvar $selectLocationIconMarker\nvar $switchGymSidebar\n\nvar language = document.documentElement.lang === '' ? 'en' : document.documentElement.lang\nvar idToPokemon = {}\nvar i8lnDictionary = {}\nvar languageLookups = 0\nvar languageLookupThreshold = 3\n\nvar searchMarkerStyles\n\nvar timestamp\nvar excludedPokemon = []\nvar notifiedPokemon = []\nvar notifiedRarity = []\nvar notifiedMinPerfection = null\n\nvar buffer = []\nvar reincludedPokemon = []\nvar reids = []\n\nvar map\nvar rawDataIsLoading = false\nvar locationMarker\nvar rangeMarkers = ['pokemon', 'pokestop', 'gym']\nvar searchMarker\nvar storeZoom = true\nvar moves\n\nvar oSwLat\nvar oSwLng\nvar oNeLat\nvar oNeLng\n\nvar lastpokestops\nvar lastgyms\nvar lastpokemon\nvar lastslocs\nvar lastspawns\n\nvar selectedStyle = 'light'\n\nvar updateWorker\nvar lastUpdateTime\n\nvar gymTypes = ['Uncontested', 'Mystic', 'Valor', 'Instinct']\nvar audio = new Audio('static/sounds/ding.mp3')\n\nvar genderType = ['♂', '♀', '⚲']\nvar unownForm = ['unset', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', '!', '?']\n\n\n/*\n text place holders:\n <pkm> - pokemon name\n <prc> - iv in percent without percent symbol\n <atk> - attack as number\n <def> - defense as number\n <sta> - stamnia as number\n */\nvar notifyIvTitle = '<pkm> <prc>% (<atk>/<def>/<sta>)'\nvar notifyNoIvTitle = '<pkm>'\n\n/*\n text place holders:\n <dist>  - disappear time\n <udist> - time until disappear\n */\nvar notifyText = 'disappears at <dist> (<udist>)'\n\n//\n// Functions\n//\n\nfunction excludePokemon(id) { // eslint-disable-line no-unused-vars\n    $selectExclude.val(\n        $selectExclude.val().concat(id)\n    ).trigger('change')\n}\n\nfunction notifyAboutPokemon(id) { // eslint-disable-line no-unused-vars\n    $selectPokemonNotify.val(\n        $selectPokemonNotify.val().concat(id)\n    ).trigger('change')\n}\n\nfunction removePokemonMarker(encounterId) { // eslint-disable-line no-unused-vars\n    if (mapData.pokemons[encounterId].marker.rangeCircle) {\n        mapData.pokemons[encounterId].marker.rangeCircle.setMap(null)\n        delete mapData.pokemons[encounterId].marker.rangeCircle\n    }\n    mapData.pokemons[encounterId].marker.setMap(null)\n    mapData.pokemons[encounterId].hidden = true\n}\n\nfunction initMap() { // eslint-disable-line no-unused-vars\n    map = new google.maps.Map(document.getElementById('map'), {\n        center: {\n            lat: Number(getParameterByName('lat')) || centerLat,\n            lng: Number(getParameterByName('lon')) || centerLng\n        },\n        zoom: Number(getParameterByName('zoom')) || Store.get('zoomLevel'),\n        fullscreenControl: true,\n        streetViewControl: false,\n        mapTypeControl: false,\n        clickableIcons: false,\n        mapTypeControlOptions: {\n            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,\n            position: google.maps.ControlPosition.RIGHT_TOP,\n            mapTypeIds: [\n                google.maps.MapTypeId.ROADMAP,\n                google.maps.MapTypeId.SATELLITE,\n                google.maps.MapTypeId.HYBRID,\n                'nolabels_style',\n                'dark_style',\n                'style_light2',\n                'style_pgo',\n                'dark_style_nl',\n                'style_light2_nl',\n                'style_pgo_nl',\n                'style_pgo_day',\n                'style_pgo_night',\n                'style_pgo_dynamic'\n            ]\n        }\n    })\n\n    var styleNoLabels = new google.maps.StyledMapType(noLabelsStyle, {\n        name: 'No Labels'\n    })\n    map.mapTypes.set('nolabels_style', styleNoLabels)\n\n    var styleDark = new google.maps.StyledMapType(darkStyle, {\n        name: 'Dark'\n    })\n    map.mapTypes.set('dark_style', styleDark)\n\n    var styleLight2 = new google.maps.StyledMapType(light2Style, {\n        name: 'Light2'\n    })\n    map.mapTypes.set('style_light2', styleLight2)\n\n    var stylePgo = new google.maps.StyledMapType(pGoStyle, {\n        name: 'RocketMap'\n    })\n    map.mapTypes.set('style_pgo', stylePgo)\n\n    var styleDarkNl = new google.maps.StyledMapType(darkStyleNoLabels, {\n        name: 'Dark (No Labels)'\n    })\n    map.mapTypes.set('dark_style_nl', styleDarkNl)\n\n    var styleLight2Nl = new google.maps.StyledMapType(light2StyleNoLabels, {\n        name: 'Light2 (No Labels)'\n    })\n    map.mapTypes.set('style_light2_nl', styleLight2Nl)\n\n    var stylePgoNl = new google.maps.StyledMapType(pGoStyleNoLabels, {\n        name: 'RocketMap (No Labels)'\n    })\n    map.mapTypes.set('style_pgo_nl', stylePgoNl)\n\n    var stylePgoDay = new google.maps.StyledMapType(pGoStyleDay, {\n        name: 'RocketMap Day'\n    })\n    map.mapTypes.set('style_pgo_day', stylePgoDay)\n\n    var stylePgoNight = new google.maps.StyledMapType(pGoStyleNight, {\n        name: 'RocketMap Night'\n    })\n    map.mapTypes.set('style_pgo_night', stylePgoNight)\n\n    // dynamic map style chooses stylePgoDay or stylePgoNight depending on client time\n    var currentDate = new Date()\n    var currentHour = currentDate.getHours()\n    var stylePgoDynamic = (currentHour >= 6 && currentHour < 19) ? stylePgoDay : stylePgoNight\n    map.mapTypes.set('style_pgo_dynamic', stylePgoDynamic)\n\n    map.addListener('maptypeid_changed', function (s) {\n        Store.set('map_style', this.mapTypeId)\n    })\n\n    map.setMapTypeId(Store.get('map_style'))\n    map.addListener('idle', updateMap)\n\n    map.addListener('zoom_changed', function () {\n        if (storeZoom === true) {\n            Store.set('zoomLevel', this.getZoom())\n        } else {\n            storeZoom = true\n        }\n\n        redrawPokemon(mapData.pokemons)\n        redrawPokemon(mapData.lurePokemons)\n    })\n\n    searchMarker = createSearchMarker()\n    locationMarker = createLocationMarker()\n    createMyLocationButton()\n    initSidebar()\n\n    $('#scan-here').on('click', function () {\n        var loc = map.getCenter()\n        changeLocation(loc.lat(), loc.lng())\n\n        if (!$('#search-switch').checked) {\n            $('#search-switch').prop('checked', true)\n            searchControl('on')\n        }\n    })\n}\n\nfunction updateLocationMarker(style) {\n    if (style in searchMarkerStyles) {\n        var url = searchMarkerStyles[style].icon\n        if (url) {\n            locationMarker.setIcon({\n                url: url,\n                scaledSize: new google.maps.Size(24, 24)\n            })\n        } else {\n            locationMarker.setIcon(url)\n        }\n        Store.set('locationMarkerStyle', style)\n    }\n\n    return locationMarker\n}\n\nfunction createLocationMarker() {\n    var position = Store.get('followMyLocationPosition')\n    var lat = ('lat' in position) ? position.lat : centerLat\n    var lng = ('lng' in position) ? position.lng : centerLng\n\n    var locationMarker = new google.maps.Marker({\n        map: map,\n        animation: google.maps.Animation.DROP,\n        position: {\n            lat: lat,\n            lng: lng\n        },\n        draggable: true,\n        icon: null,\n        optimized: false,\n        zIndex: google.maps.Marker.MAX_ZINDEX + 2\n    })\n\n    locationMarker.infoWindow = new google.maps.InfoWindow({\n        content: '<div><b>My Location</b></div>',\n        disableAutoPan: true\n    })\n\n    addListeners(locationMarker)\n\n    google.maps.event.addListener(locationMarker, 'dragend', function () {\n        var newLocation = locationMarker.getPosition()\n        Store.set('followMyLocationPosition', {\n            lat: newLocation.lat(),\n            lng: newLocation.lng()\n        })\n    })\n\n    return locationMarker\n}\n\nfunction updateSearchMarker(style) {\n    if (style in searchMarkerStyles) {\n        var url = searchMarkerStyles[style].icon\n        if (url) {\n            searchMarker.setIcon({\n                url: url,\n                scaledSize: new google.maps.Size(24, 24)\n            })\n        } else {\n            searchMarker.setIcon(url)\n        }\n        Store.set('searchMarkerStyle', style)\n    }\n\n    return searchMarker\n}\n\nfunction createSearchMarker() {\n    var searchMarker = new google.maps.Marker({ // need to keep reference.\n        position: {\n            lat: centerLat,\n            lng: centerLng\n        },\n        map: map,\n        animation: google.maps.Animation.DROP,\n        draggable: !Store.get('lockMarker'),\n        icon: null,\n        optimized: false,\n        zIndex: google.maps.Marker.MAX_ZINDEX + 1\n    })\n\n    searchMarker.infoWindow = new google.maps.InfoWindow({\n        content: '<div><b>Search Location</b></div>',\n        disableAutoPan: true\n    })\n\n    addListeners(searchMarker)\n\n    var oldLocation = null\n    google.maps.event.addListener(searchMarker, 'dragstart', function () {\n        oldLocation = searchMarker.getPosition()\n    })\n\n    google.maps.event.addListener(searchMarker, 'dragend', function () {\n        var newLocation = searchMarker.getPosition()\n        changeSearchLocation(newLocation.lat(), newLocation.lng())\n            .done(function () {\n                oldLocation = null\n            })\n            .fail(function () {\n                if (oldLocation) {\n                    searchMarker.setPosition(oldLocation)\n                }\n            })\n    })\n\n    return searchMarker\n}\n\nvar searchControlURI = 'search_control'\n\nfunction searchControl(action) {\n    $.post(searchControlURI + '?action=' + encodeURIComponent(action))\n    $('#scan-here').toggleClass('disabled', action === 'off')\n}\n\nfunction updateSearchStatus() {\n    $.getJSON(searchControlURI).then(function (data) {\n        $('#search-switch').prop('checked', data.status)\n        $('#scan-here').toggleClass('disabled', !data.status)\n    })\n}\n\nfunction initSidebar() {\n    $('#gyms-switch').prop('checked', Store.get('showGyms'))\n    $('#gym-sidebar-switch').prop('checked', Store.get('useGymSidebar'))\n    $('#gym-sidebar-wrapper').toggle(Store.get('showGyms'))\n    $('#gyms-filter-wrapper').toggle(Store.get('showGyms'))\n    $('#team-gyms-only-switch').val(Store.get('showTeamGymsOnly'))\n    $('#open-gyms-only-switch').prop('checked', Store.get('showOpenGymsOnly'))\n    $('#min-level-gyms-filter-switch').val(Store.get('minGymLevel'))\n    $('#max-level-gyms-filter-switch').val(Store.get('maxGymLevel'))\n    $('#last-update-gyms-switch').val(Store.get('showLastUpdatedGymsOnly'))\n    $('#pokemon-switch').prop('checked', Store.get('showPokemon'))\n    $('#pokestops-switch').prop('checked', Store.get('showPokestops'))\n    $('#lured-pokestops-only-switch').val(Store.get('showLuredPokestopsOnly'))\n    $('#lured-pokestops-only-wrapper').toggle(Store.get('showPokestops'))\n    $('#geoloc-switch').prop('checked', Store.get('geoLocate'))\n    $('#lock-marker-switch').prop('checked', Store.get('lockMarker'))\n    $('#start-at-user-location-switch').prop('checked', Store.get('startAtUserLocation'))\n    $('#follow-my-location-switch').prop('checked', Store.get('followMyLocation'))\n    $('#scan-here-switch').prop('checked', Store.get('scanHere'))\n    $('#scan-here').toggle(Store.get('scanHere'))\n    $('#scanned-switch').prop('checked', Store.get('showScanned'))\n    $('#spawnpoints-switch').prop('checked', Store.get('showSpawnpoints'))\n    $('#ranges-switch').prop('checked', Store.get('showRanges'))\n    $('#sound-switch').prop('checked', Store.get('playSound'))\n    $('#pokemoncries').toggle(Store.get('playSound'))\n    $('#cries-switch').prop('checked', Store.get('playCries'))\n    var searchBox = new google.maps.places.Autocomplete(document.getElementById('next-location'))\n    $('#next-location').css('background-color', $('#geoloc-switch').prop('checked') ? '#e0e0e0' : '#ffffff')\n\n    if ($('#search-switch').length) {\n        updateSearchStatus()\n        setInterval(updateSearchStatus, 5000)\n    }\n\n    searchBox.addListener('place_changed', function () {\n        var place = searchBox.getPlace()\n\n        if (!place.geometry) return\n\n        var loc = place.geometry.location\n        changeLocation(loc.lat(), loc.lng())\n    })\n\n    $('#pokemon-icon-size').val(Store.get('iconSizeModifier'))\n}\n\nfunction getTypeSpan(type) {\n    return `<span style='padding: 2px 5px; text-transform: uppercase; color: white; margin-right: 2px; border-radius: 4px; font-size: 0.6em; vertical-align: middle; background-color: ${type['color']}'>${type['type']}</span>`\n}\n\nfunction openMapDirections(lat, lng) { // eslint-disable-line no-unused-vars\n    var url = 'https://www.google.com/maps/?daddr=' + lat + ',' + lng\n    window.open(url, '_blank')\n}\n\n// Converts timestamp to readable String\nfunction getDateStr(t) {\n    var dateStr = 'Unknown'\n    if (t) {\n        dateStr = moment(t).fromNow()\n    }\n    return dateStr\n}\n\nfunction pokemonLabel(item) {\n    var name = item['pokemon_name']\n    var rarityDisplay = item['pokemon_rarity'] ? '(' + item['pokemon_rarity'] + ')' : ''\n    var types = item['pokemon_types']\n    var typesDisplay = ''\n    var encounterId = item['encounter_id']\n    var id = item['pokemon_id']\n    var latitude = item['latitude']\n    var longitude = item['longitude']\n    var disappearTime = item['disappear_time']\n    var atk = item['individual_attack']\n    var def = item['individual_defense']\n    var sta = item['individual_stamina']\n    var pMove1 = (moves[item['move_1']] !== undefined) ? i8ln(moves[item['move_1']]['name']) : 'gen/unknown'\n    var pMove2 = (moves[item['move_2']] !== undefined) ? i8ln(moves[item['move_2']]['name']) : 'gen/unknown'\n    var weight = item['weight']\n    var height = item['height']\n    var gender = item['gender']\n    var form = item['form']\n    var cp = item['cp']\n    var cpMultiplier = item['cp_multiplier']\n\n    $.each(types, function (index, type) {\n        typesDisplay += getTypeSpan(type)\n    })\n\n    var details = ''\n\n    var contentstring = ''\n    var formString = ''\n\n    if (id === 201 && form !== null && form > 0) {\n        formString += `(${unownForm[item['form']]})`\n    }\n\n    contentstring += `\n    <div class='pokemon name'>\n      ${name} <span class='pokemon name pokedex'><a href='http://pokemon.gameinfo.io/en/pokemon/${id}' target='_blank' title='View in Pokédex'>#${id}</a></span> ${formString} <span class='pokemon gender rarity'>${genderType[gender - 1]} ${rarityDisplay}</span> ${typesDisplay}\n    </div>`\n\n    if (cp !== null && cpMultiplier !== null) {\n        var pokemonLevel = getPokemonLevel(cpMultiplier)\n\n        if (atk !== null && def !== null && sta !== null) {\n            var iv = getIv(atk, def, sta)\n        }\n\n        contentstring += `\n          <div class='pokemon container'>\n            <div class='pokemon container content-left'>\n              <div>\n                <img class='pokemon sprite' src='static/icons/${id}.png'>\n                <span class='pokemon'>Level: </span><span class='pokemon'>${pokemonLevel}</span>\n                <span class='pokemon links exclude'><a href='javascript:excludePokemon(${id})'>Exclude</a></span>\n                <span class='pokemon links notify'><a href='javascript:notifyAboutPokemon(${id})'>Notify</a></span>\n                <span class='pokemon links remove'><a href='javascript:removePokemonMarker(\"${encounterId}\")'>Remove</a></span>\n              </div>\n          </div>\n          <div class='pokemon container content-right'>\n            <div>\n              <div class='pokemon disappear'>\n                <span class='label-countdown' disappears-at='${disappearTime}'>00m00s</span> left\n              </div>\n              <div class='pokemon'>\n                CP: <span class='pokemon encounter'>${cp}/${iv.toFixed(1)}%</span> (A${atk}/D${def}/S${sta})\n              </div>\n              <div class='pokemon'>\n                Moveset: <span class='pokemon encounter'>${pMove1}/${pMove2}</span>\n              </div>\n              <div class='pokemon'>\n                Weight: ${weight.toFixed(2)}kg | Height: ${height.toFixed(2)}m\n              </div>\n              <div>\n                <span class='pokemon navigate'><a href='javascript:void(0);' onclick='javascript:openMapDirections(${latitude},${longitude});' title='Open in Google Maps'>${latitude.toFixed(6)}, ${longitude.toFixed(7)}</a></span>\n              </div>\n          </div>\n        </div>\n      </div>`\n    } else {\n        contentstring += `\n      <div class='pokemon container'>\n        <div class='pokemon container content-left'>\n          <div>\n            <img class='pokemon sprite' src='static/icons/${id}.png'>\n            <span class='pokemon'>Level: </span><span class='pokemon no-encounter'>n/a</span>\n            <span class='pokemon links exclude'><a href='javascript:excludePokemon(${id})'>Exclude</a></span>\n            <span class='pokemon links notify'><a href='javascript:notifyAboutPokemon(${id})'>Notify</a></span>\n            <span class='pokemon links remove'><a href='javascript:removePokemonMarker(\"${encounterId}\")'>Remove</a></span>\n          </div>\n      </div>\n      <div class='pokemon container content-right'>\n        <div>\n          <div class='pokemon disappear'>\n            <span class='label-countdown' disappears-at='${disappearTime}'>00m00s</span> left\n          </div>\n          <div class='pokemon'>\n            CP: <span class='pokemon no-encounter'>No information</span>\n          </div>\n          <div class='pokemon'>\n            Moveset: <span class='pokemon no-encounter'>No information</span>\n          </div>\n          <div class='pokemon'>\n            Weight: <span class='pokemon no-encounter'>n/a</span> | Height: <span class='pokemon no-encounter'>n/a</span>\n          </div>\n          <div>\n            <span class='pokemon navigate'><a href='javascript:void(0);' onclick='javascript:openMapDirections(${latitude},${longitude});' title='Open in Google Maps'>${latitude.toFixed(6)}, ${longitude.toFixed(7)}</a></span>\n          </div>\n      </div>\n    </div>\n  </div>`\n    }\n\n    contentstring += `\n      ${details}`\n\n    return contentstring\n}\n\nfunction isOngoingRaid(raid) {\n    return raid && Date.now() < raid.end && Date.now() > raid.start\n}\n\nfunction gymLabel(gym, includeMembers = true) {\n    const pokemonWithImages = [\n        3, 6, 9, 59, 65, 68, 89, 94, 103, 110, 112, 125, 126, 129, 131, 134,\n        135, 136, 143, 153, 156, 159, 248\n    ]\n\n    const raid = gym.raid\n    var raidStr = ''\n    if (raid && raid.end > Date.now()) {\n        if (raid.pokemon_id !== null) {\n            let pMove1 = (moves[raid['move_1']] !== undefined) ? i8ln(moves[raid['move_1']]['name']) : 'gen/unknown'\n            let pMove2 = (moves[raid['move_2']] !== undefined) ? i8ln(moves[raid['move_2']]['name']) : 'gen/unknown'\n\n            raidStr += `\n                    <div class='raid encounter'>\n                       CP: <span class='raid encounter info'>${raid['cp']}</span>\n                    </div>\n                    <div class='raid encounter'>\n                         Moveset: <span class='raid encounter info'>${pMove1}/${pMove2}</span>\n                    </div>`\n        }\n    }\n    const lastScannedStr = getDateStr(gym.last_scanned)\n    const lastModifiedStr = getDateStr(gym.last_modified)\n    const slotsString = gym.slots_available ? (gym.slots_available === 1 ? '1 Free Slot' : `${gym.slots_available} Free Slots`) : 'No Free Slots'\n    const teamColor = ['85,85,85,1', '0,134,255,1', '255,26,26,1', '255,159,25,1']\n    const teamName = gymTypes[gym.team_id]\n    const isUpcomingRaid = raid != null && Date.now() < raid.start\n    const isRaidStarted = isOngoingRaid(raid)\n\n    var subtitle = ''\n    var image = ''\n    var imageLbl = ''\n    var navInfo = ''\n    var memberStr = ''\n\n    const gymPoints = gym.total_cp\n    const titleText = gym.name ? gym.name : (gym.team_id === 0 ? teamName : 'Team ' + teamName)\n    const title = `\n      <div class='gym name' style='color:rgba(${teamColor[gym.team_id]})'>\n        ${titleText}\n      </div>`\n\n    if (gym.team_id !== 0) {\n        subtitle = `\n        <div>\n            <img class='gym info strength' src='static/images/gym/Strength.png'>\n            <span class='gym info strength'>\n              Strength: ${gymPoints} (${slotsString})\n            </span>\n        </div>`\n    }\n\n    if (isUpcomingRaid || isRaidStarted) {\n        const raidColor = ['252,112,176', '255,158,22']\n        const levelStr = '★'.repeat(raid['level'])\n\n        if (isRaidStarted && raid.pokemon_id) {\n            // Set default image.\n            image = `\n                <img class='gym sprite' src='static/images/raid/unknown.png'>\n                ${raidStr}\n            `\n\n            // Use Pokémon-specific image if we have one.\n            if (pokemonWithImages.indexOf(raid.pokemon_id) !== -1) {\n                image = `\n                    <img class='gym sprite' src='static/images/raid/${raid.pokemon_id}.png'>\n                    ${raidStr}\n                `\n            }\n        } else {\n            image = `<img class='gym sprite' src='static/images/gym/${gymTypes[gym.team_id]}_${getGymLevel(gym)}_${raid.level}.png'>`\n        }\n\n        if (isUpcomingRaid) {\n            imageLbl = `\n                <div class='raid'>\n                  <span style='color:rgb(${raidColor[Math.floor((raid.level - 1) / 2)]})'>\n                  ${levelStr}\n                  </span>\n                  Raid in <span class='raid countdown label-countdown' disappears-at='${raid.start}'></span>\n                </div>`\n        } else {\n            let typesDisplay = ''\n\n            $.each(raid.pokemon_types, function (index, type) {\n                typesDisplay += getTypeSpan(type)\n            })\n\n            subtitle = `\n                <div class='raid'>\n                  <span style='color:rgb(${raidColor[Math.floor((raid.level - 1) / 2)]})'>\n                  ${levelStr}\n                  </span>\n                  <span class='raid countdown label-countdown' disappears-at='${raid.end}'></span> left\n                </div>\n                   <div class='raid pokemon name'>\n                        ${raid['pokemon_name']}\n                            <a href='http://pokemon.gameinfo.io/en/pokemon/${raid['pokemon_id']}' target='_blank' title='View in Pokédex'>#${raid['pokemon_id']}</a>\n                        ${typesDisplay}\n                </div>`\n        }\n    } else {\n        image = `<img class='gym sprite' src='static/images/gym/${teamName}_${getGymLevel(gym)}.png'>`\n    }\n\n\n    navInfo = `\n            <div class='gym container'>\n                <div>\n                  <span class='gym info navigate'>\n                    <a href='javascript:void(0);' onclick='javascript:openMapDirections(${gym.latitude},${gym.longitude});' title='Open in Google Maps'>\n                      ${gym.latitude.toFixed(6)}, ${gym.longitude.toFixed(7)}\n                    </a>\n                  </span>\n                </div>\n                <div class='gym info last-scanned'>\n                    Last Scanned: ${lastScannedStr}\n                </div>\n                <div class='gym info last-modified'>\n                    Last Modified: ${lastModifiedStr}\n                </div>\n            </div>\n        </div>`\n\n\n    if (!isRaidStarted && includeMembers) {\n        memberStr = '<div>'\n\n        gym.pokemon.forEach((member) => {\n            memberStr += `\n            <span class='gym member'>\n              <center>\n                <div>\n                  <div>\n                    <i class='pokemon-sprite n${member.pokemon_id}'></i>\n                  </div>\n                  <div>\n                    <span class='gym pokemon'>${member.pokemon_name}</span>\n                  </div>\n                  <div>\n                    <img class='gym pokemon motivation heart' src='static/images/gym/Heart.png'> <span class='gym pokemon motivation'>${member.cp_decayed}</span>\n                  </div>\n                </div>\n              </center>\n            </span>`\n        })\n\n        memberStr += '</div>'\n    }\n\n    return `\n        <div>\n            <center>\n                ${title}\n                ${subtitle}\n                ${image}\n                ${imageLbl}\n            </center>\n            ${navInfo}\n            <center>\n                ${memberStr}\n            </center>\n        </div>`\n}\n\nfunction pokestopLabel(expireTime, latitude, longitude) {\n    var str\n    if (expireTime) {\n        str = `\n            <div>\n              <div class='pokestop lure'>\n                Lured Pokéstop\n              </div>\n              <div class='pokestop-expire'>\n                  <span class='label-countdown' disappears-at='${expireTime}'>00m00s</span> left\n              </div>\n              <div>\n                <img class='pokestop sprite' src='static/images/pokestop//PokestopLured.png'>\n              </div>\n              <div>\n                <span class='pokestop navigate'><a href='javascript:void(0);' onclick='javascript:openMapDirections(${latitude},${longitude});' title='Open in Google Maps'; class='pokestop lure'>${latitude.toFixed(6)}, ${longitude.toFixed(7)}</a></span>\n              </div>\n            </div>\n          </div>`\n    } else {\n        str = `\n            <div>\n              <div class='pokestop nolure'>\n                Pokéstop\n              </div>\n              <div>\n                <img class='pokestop sprite' src='static/images/pokestop//Pokestop.png'>\n              </div>\n              <div>\n                <span class='pokestop navigate'><a href='javascript:void(0);' onclick='javascript:openMapDirections(${latitude},${longitude});' title='Open in Google Maps'; class='pokestop nolure'>${latitude.toFixed(6)}, ${longitude.toFixed(7)}</a></span>\n              </div>\n            </div>\n          </div>`\n    }\n\n    return str\n}\n\nfunction formatSpawnTime(seconds) {\n    // the addition and modulo are required here because the db stores when a spawn disappears\n    // the subtraction to get the appearance time will knock seconds under 0 if the spawn happens in the previous hour\n    return ('0' + Math.floor(((seconds + 3600) % 3600) / 60)).substr(-2) + ':' + ('0' + seconds % 60).substr(-2)\n}\n\nfunction spawnpointLabel(item) {\n    var str = `\n        <div>\n            <b>Spawn Point</b>\n        </div>`\n\n    if (item.uncertain) {\n        str += `\n            <div>\n                Spawn times not yet determined. Current guess ${formatSpawnTime(item.appear_time)} until ${formatSpawnTime(item.disappear_time)}\n            </div>`\n    } else {\n        str += `\n            <div>\n                Every hour from ${formatSpawnTime(item.appear_time)} to ${formatSpawnTime(item.disappear_time)}\n            </div>`\n    }\n    return str\n}\n\nfunction addRangeCircle(marker, map, type, teamId) {\n    var targetmap = null\n    var circleCenter = new google.maps.LatLng(marker.position.lat(), marker.position.lng())\n    var gymColors = ['#999999', '#0051CF', '#FF260E', '#FECC23'] // 'Uncontested', 'Mystic', 'Valor', 'Instinct']\n    var teamColor = gymColors[0]\n    if (teamId) teamColor = gymColors[teamId]\n\n    var range\n    var circleColor\n\n    // handle each type of marker and be explicit about the range circle attributes\n    switch (type) {\n        case 'pokemon':\n            circleColor = '#C233F2'\n            range = 40 // pokemon appear at 40m and then you can move away. still have to be 40m close to see it though, so ignore the further disappear distance\n            break\n        case 'pokestop':\n            circleColor = '#3EB0FF'\n            range = 40\n            break\n        case 'gym':\n            circleColor = teamColor\n            range = 40\n            break\n    }\n\n    if (map) targetmap = map\n\n    var rangeCircleOpts = {\n        map: targetmap,\n        radius: range, // meters\n        strokeWeight: 1,\n        strokeColor: circleColor,\n        strokeOpacity: 0.9,\n        center: circleCenter,\n        fillColor: circleColor,\n        fillOpacity: 0.3\n    }\n    var rangeCircle = new google.maps.Circle(rangeCircleOpts)\n    return rangeCircle\n}\n\nfunction isRangeActive(map) {\n    if (map.getZoom() < 16) return false\n    return Store.get('showRanges')\n}\n\nfunction getIv(atk, def, stm) {\n    if (atk !== null) {\n        return 100.0 * (atk + def + stm) / 45\n    }\n\n    return false\n}\n\nfunction getPokemonLevel(cpMultiplier) {\n    if (cpMultiplier < 0.734) {\n        var pokemonLevel = (58.35178527 * cpMultiplier * cpMultiplier -\n        2.838007664 * cpMultiplier + 0.8539209906)\n    } else {\n        pokemonLevel = 171.0112688 * cpMultiplier - 95.20425243\n    }\n    pokemonLevel = (Math.round(pokemonLevel) * 2) / 2\n\n    return pokemonLevel\n}\n\nfunction getGymLevel(gym) {\n    return 6 - gym['slots_available']\n}\n\nfunction lpad(str, len, padstr) {\n    return Array(Math.max(len - String(str).length + 1, 0)).join(padstr) + str\n}\n\nfunction repArray(text, find, replace) {\n    for (var i = 0; i < find.length; i++) {\n        text = text.replace(find[i], replace[i])\n    }\n\n    return text\n}\n\nfunction getTimeUntil(time) {\n    var now = +new Date()\n    var tdiff = time - now\n\n    var sec = Math.floor((tdiff / 1000) % 60)\n    var min = Math.floor((tdiff / 1000 / 60) % 60)\n    var hour = Math.floor((tdiff / (1000 * 60 * 60)) % 24)\n\n    return {\n        'total': tdiff,\n        'hour': hour,\n        'min': min,\n        'sec': sec,\n        'now': now,\n        'ttime': time\n    }\n}\n\nfunction getNotifyText(item) {\n    var iv = getIv(item['individual_attack'], item['individual_defense'], item['individual_stamina'])\n    var find = ['<prc>', '<pkm>', '<atk>', '<def>', '<sta>']\n    var replace = [((iv) ? iv.toFixed(1) : ''), item['pokemon_name'], item['individual_attack'],\n        item['individual_defense'], item['individual_stamina']]\n    var ntitle = repArray(((iv) ? notifyIvTitle : notifyNoIvTitle), find, replace)\n    var dist = (new Date(item['disappear_time'])).toLocaleString([], {\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit',\n        hour12: false\n    })\n    var until = getTimeUntil(item['disappear_time'])\n    var udist = (until.hour > 0) ? until.hour + ':' : ''\n    udist += lpad(until.min, 2, 0) + 'm' + lpad(until.sec, 2, 0) + 's'\n    find = ['<dist>', '<udist>']\n    replace = [dist, udist]\n    var ntext = repArray(notifyText, find, replace)\n\n    return {\n        'fav_title': ntitle,\n        'fav_text': ntext\n    }\n}\n\nfunction playPokemonSound(pokemonID) {\n    if (!Store.get('playSound')) {\n        return\n    }\n    if (!Store.get('playCries')) {\n        audio.play()\n    } else {\n        var audioCry = new Audio('static/sounds/cries/' + pokemonID + '.wav')\n        audioCry.play().catch(function (err) {\n            if (err) {\n                console.log('Sound for Pokémon ' + pokemonID + ' is missing, using generic sound instead.')\n                audio.play()\n            }\n        })\n    }\n}\n\nfunction customizePokemonMarker(marker, item, skipNotification) {\n    var notifyText = getNotifyText(item)\n    marker.addListener('click', function () {\n        this.setAnimation(null)\n        this.animationDisabled = true\n    })\n\n    if (!marker.rangeCircle && isRangeActive(map)) {\n        marker.rangeCircle = addRangeCircle(marker, map, 'pokemon')\n    }\n\n    marker.infoWindow = new google.maps.InfoWindow({\n        content: pokemonLabel(item),\n        disableAutoPan: true\n    })\n\n    if (notifiedPokemon.indexOf(item['pokemon_id']) > -1 || notifiedRarity.indexOf(item['pokemon_rarity']) > -1) {\n        if (!skipNotification) {\n            playPokemonSound(item['pokemon_id'])\n            sendNotification(notifyText.fav_title, notifyText.fav_text, 'static/icons/' + item['pokemon_id'] + '.png', item['latitude'], item['longitude'])\n        }\n        if (marker.animationDisabled !== true) {\n            marker.setAnimation(google.maps.Animation.BOUNCE)\n        }\n    }\n\n    if (item['individual_attack'] != null) {\n        var perfection = getIv(item['individual_attack'], item['individual_defense'], item['individual_stamina'])\n        if (notifiedMinPerfection > 0 && perfection >= notifiedMinPerfection) {\n            if (!skipNotification) {\n                playPokemonSound(item['pokemon_id'])\n                sendNotification(notifyText.fav_title, notifyText.fav_text, 'static/icons/' + item['pokemon_id'] + '.png', item['latitude'], item['longitude'])\n            }\n            if (marker.animationDisabled !== true) {\n                marker.setAnimation(google.maps.Animation.BOUNCE)\n            }\n        }\n    }\n\n    addListeners(marker)\n}\n\nfunction setupGymMarker(item) {\n    var marker = new google.maps.Marker({\n        position: {\n            lat: item['latitude'],\n            lng: item['longitude']\n        },\n        map: map\n    })\n    marker.infoWindow = new google.maps.InfoWindow({\n        content: '',\n        disableAutoPan: true\n    })\n    updateGymMarker(item, marker)\n\n    if (!marker.rangeCircle && isRangeActive(map)) {\n        marker.rangeCircle = addRangeCircle(marker, map, 'gym', item['team_id'])\n    }\n\n\n    if (Store.get('useGymSidebar')) {\n        marker.addListener('click', function () {\n            var gymSidebar = document.querySelector('#gym-details')\n            if (gymSidebar.getAttribute('data-id') === item['gym_id'] && gymSidebar.classList.contains('visible')) {\n                gymSidebar.classList.remove('visible')\n            } else {\n                gymSidebar.setAttribute('data-id', item['gym_id'])\n                showGymDetails(item['gym_id'])\n            }\n        })\n\n        google.maps.event.addListener(marker.infoWindow, 'closeclick', function () {\n            marker.persist = null\n        })\n\n        if (!isMobileDevice() && !isTouchDevice()) {\n            marker.addListener('mouseover', function () {\n                marker.infoWindow.open(map, marker)\n                clearSelection()\n                updateLabelDiffTime()\n            })\n        }\n\n        marker.addListener('mouseout', function () {\n            if (!marker.persist) {\n                marker.infoWindow.close()\n            }\n        })\n    } else {\n        addListeners(marker)\n    }\n\n    return marker\n}\n\nfunction updateGymMarker(item, marker) {\n    if (item.raid !== null && item.raid.end > Date.now() && item.raid.pokemon_id !== null) {\n        marker.setIcon({\n            url: 'static/images/raid/' + item.raid.pokemon_id + '.png',\n            scaledSize: new google.maps.Size(48, 48)\n        })\n        marker.setZIndex(google.maps.Marker.MAX_ZINDEX + 1)\n    } else if (item.raid !== null && item.raid.end > Date.now()) {\n        marker.setIcon({\n            url: 'static/images/gym/' + gymTypes[item.team_id] + '_' + getGymLevel(item) + '_' + item['raid']['level'] + '.png',\n            scaledSize: new google.maps.Size(48, 48)\n        })\n    } else {\n        marker.setIcon({\n            url: 'static/images/gym/' + gymTypes[item.team_id] + '_' + getGymLevel(item) + '.png',\n            scaledSize: new google.maps.Size(48, 48)\n        })\n        marker.setZIndex(1)\n    }\n    marker.infoWindow.setContent(gymLabel(item))\n    return marker\n}\n\nfunction setupPokestopMarker(item) {\n    var imagename = item['lure_expiration'] ? 'PokestopLured' : 'Pokestop'\n    var image = {\n        url: 'static/images/pokestop/' + imagename + '.png',\n        scaledSize: new google.maps.Size(32, 32)\n    }\n    var marker = new google.maps.Marker({\n        position: {\n            lat: item['latitude'],\n            lng: item['longitude']\n        },\n        map: map,\n        zIndex: item['lure_expiration'] ? 3 : 2,\n        icon: image\n    })\n\n    if (!marker.rangeCircle && isRangeActive(map)) {\n        marker.rangeCircle = addRangeCircle(marker, map, 'pokestop')\n    }\n\n    marker.infoWindow = new google.maps.InfoWindow({\n        content: pokestopLabel(item['lure_expiration'], item['latitude'], item['longitude']),\n        disableAutoPan: true\n    })\n\n    addListeners(marker)\n    return marker\n}\n\nfunction getColorByDate(value) {\n    // Changes the color from red to green over 15 mins\n    var diff = (Date.now() - value) / 1000 / 60 / 15\n\n    if (diff > 1) {\n        diff = 1\n    }\n\n    // value from 0 to 1 - Green to Red\n    var hue = ((1 - diff) * 120).toString(10)\n    return ['hsl(', hue, ',100%,50%)'].join('')\n}\n\nfunction setupScannedMarker(item) {\n    var circleCenter = new google.maps.LatLng(item['latitude'], item['longitude'])\n\n    var marker = new google.maps.Circle({\n        map: map,\n        clickable: false,\n        center: circleCenter,\n        radius: (showConfig.pokemons === true ? 70 : 450), // metres\n        fillColor: getColorByDate(item['last_modified']),\n        fillOpacity: 0.1,\n        strokeWeight: 1,\n        strokeOpacity: 0.5\n    })\n\n    return marker\n}\n\nfunction getColorBySpawnTime(value) {\n    var now = new Date()\n    var seconds = now.getMinutes() * 60 + now.getSeconds()\n\n    // account for hour roll-over\n    if (seconds < 900 && value > 2700) {\n        seconds += 3600\n    } else if (seconds > 2700 && value < 900) {\n        value += 3600\n    }\n\n    var diff = (seconds - value)\n    var hue = 275 // light purple when spawn is neither about to spawn nor active\n    if (diff >= 0 && diff <= 1800) { // green to red over 30 minutes of active spawn\n        hue = (1 - (diff / 60 / 30)) * 120\n    } else if (diff < 0 && diff > -300) { // light blue to dark blue over 5 minutes til spawn\n        hue = ((1 - (-diff / 60 / 5)) * 50) + 200\n    }\n\n    hue = Math.round(hue / 5) * 5\n\n    return hue\n}\n\nfunction changeSpawnIcon(color, zoom) {\n    var urlColor = ''\n    if (color === 275) {\n        urlColor = './static/icons/hsl-275-light.png'\n    } else {\n        urlColor = './static/icons/hsl-' + color + '.png'\n    }\n    var zoomScale = 1.6 // adjust this value to change the size of the spawnpoint icons\n    var minimumSize = 1\n    var newSize = Math.round(zoomScale * (zoom - 10)) // this scales the icon based on zoom\n    if (newSize < minimumSize) {\n        newSize = minimumSize\n    }\n\n    var newIcon = {\n        url: urlColor,\n        scaledSize: new google.maps.Size(newSize, newSize),\n        anchor: new google.maps.Point(newSize / 2, newSize / 2)\n    }\n\n    return newIcon\n}\n\nfunction spawnPointIndex(color) {\n    var newIndex = 1\n    var scale = 0\n    if (color >= 0 && color <= 120) { // high to low over 15 minutes of active spawn\n        scale = color / 120\n        newIndex = 100 + scale * 100\n    } else if (color >= 200 && color <= 250) { // low to high over 5 minutes til spawn\n        scale = (color - 200) / 50\n        newIndex = scale * 100\n    }\n\n    return newIndex\n}\n\nfunction setupSpawnpointMarker(item) {\n    var circleCenter = new google.maps.LatLng(item['latitude'], item['longitude'])\n    var hue = getColorBySpawnTime(item.appear_time)\n    var zoom = map.getZoom()\n\n    var marker = new google.maps.Marker({\n        map: map,\n        position: circleCenter,\n        icon: changeSpawnIcon(hue, zoom),\n        zIndex: spawnPointIndex(hue)\n    })\n\n    marker.infoWindow = new google.maps.InfoWindow({\n        content: spawnpointLabel(item),\n        disableAutoPan: true,\n        position: circleCenter\n    })\n\n    addListeners(marker)\n\n    return marker\n}\n\nfunction clearSelection() {\n    if (document.selection) {\n        document.selection.empty()\n    } else if (window.getSelection) {\n        window.getSelection().removeAllRanges()\n    }\n}\n\nfunction addListeners(marker) {\n    marker.addListener('click', function () {\n        if (!marker.infoWindowIsOpen) {\n            marker.infoWindow.open(map, marker)\n            clearSelection()\n            updateLabelDiffTime()\n            marker.persist = true\n            marker.infoWindowIsOpen = true\n        } else {\n            marker.persist = null\n            marker.infoWindow.close()\n            marker.infoWindowIsOpen = false\n        }\n    })\n\n    google.maps.event.addListener(marker.infoWindow, 'closeclick', function () {\n        marker.persist = null\n    })\n\n    if (!isMobileDevice() && !isTouchDevice()) {\n        marker.addListener('mouseover', function () {\n            marker.infoWindow.open(map, marker)\n            clearSelection()\n            updateLabelDiffTime()\n        })\n    }\n\n    marker.addListener('mouseout', function () {\n        if (!marker.persist) {\n            marker.infoWindow.close()\n        }\n    })\n\n    return marker\n}\n\nfunction clearStaleMarkers() {\n    $.each(mapData.pokemons, function (key, value) {\n        if (mapData.pokemons[key]['disappear_time'] < new Date().getTime() ||\n            excludedPokemon.indexOf(mapData.pokemons[key]['pokemon_id']) >= 0) {\n            if (mapData.pokemons[key].marker.rangeCircle) {\n                mapData.pokemons[key].marker.rangeCircle.setMap(null)\n                delete mapData.pokemons[key].marker.rangeCircle\n            }\n            mapData.pokemons[key].marker.setMap(null)\n            delete mapData.pokemons[key]\n        }\n    })\n\n    $.each(mapData.lurePokemons, function (key, value) {\n        if (mapData.lurePokemons[key]['lure_expiration'] < new Date().getTime() ||\n            excludedPokemon.indexOf(mapData.lurePokemons[key]['pokemon_id']) >= 0) {\n            mapData.lurePokemons[key].marker.setMap(null)\n            delete mapData.lurePokemons[key]\n        }\n    })\n\n    $.each(mapData.scanned, function (key, value) {\n        // If older than 15mins remove\n        if (mapData.scanned[key]['last_modified'] < (new Date().getTime() - 15 * 60 * 1000)) {\n            mapData.scanned[key].marker.setMap(null)\n            delete mapData.scanned[key]\n        }\n    })\n}\n\nfunction showInBoundsMarkers(markers, type) {\n    $.each(markers, function (key, value) {\n        var marker = markers[key].marker\n        var show = false\n        if (!markers[key].hidden) {\n            if (typeof marker.getBounds === 'function') {\n                if (map.getBounds().intersects(marker.getBounds())) {\n                    show = true\n                }\n            } else if (typeof marker.getPosition === 'function') {\n                if (map.getBounds().contains(marker.getPosition())) {\n                    show = true\n                }\n            }\n        }\n        // marker has an associated range\n        if (show && rangeMarkers.indexOf(type) !== -1) {\n            // no range circle yet...let's create one\n            if (!marker.rangeCircle) {\n                // but only if range is active\n                if (isRangeActive(map)) {\n                    if (type === 'gym') marker.rangeCircle = addRangeCircle(marker, map, type, markers[key].team_id)\n                    else marker.rangeCircle = addRangeCircle(marker, map, type)\n                }\n            } else { // there's already a range circle\n                if (isRangeActive(map)) {\n                    marker.rangeCircle.setMap(map)\n                } else {\n                    marker.rangeCircle.setMap(null)\n                }\n            }\n        }\n\n        if (show && !marker.getMap()) {\n            marker.setMap(map)\n            // Not all markers can be animated (ex: scan locations)\n            if (marker.setAnimation && marker.oldAnimation) {\n                marker.setAnimation(marker.oldAnimation)\n            }\n        } else if (!show && marker.getMap()) {\n            // Not all markers can be animated (ex: scan locations)\n            if (marker.getAnimation) {\n                marker.oldAnimation = marker.getAnimation()\n            }\n            if (marker.rangeCircle) marker.rangeCircle.setMap(null)\n            marker.setMap(null)\n        }\n    })\n}\n\nfunction loadRawData() {\n    var loadPokemon = Store.get('showPokemon')\n    var loadGyms = Store.get('showGyms')\n    var loadPokestops = Store.get('showPokestops')\n    var loadScanned = Store.get('showScanned')\n    var loadSpawnpoints = Store.get('showSpawnpoints')\n    var loadLuredOnly = Boolean(Store.get('showLuredPokestopsOnly'))\n\n    var bounds = map.getBounds()\n    var swPoint = bounds.getSouthWest()\n    var nePoint = bounds.getNorthEast()\n    var swLat = swPoint.lat()\n    var swLng = swPoint.lng()\n    var neLat = nePoint.lat()\n    var neLng = nePoint.lng()\n\n    return $.ajax({\n        url: 'raw_data',\n        type: 'GET',\n        data: {\n            'timestamp': timestamp,\n            'pokemon': loadPokemon,\n            'lastpokemon': lastpokemon,\n            'pokestops': loadPokestops,\n            'lastpokestops': lastpokestops,\n            'luredonly': loadLuredOnly,\n            'gyms': loadGyms,\n            'lastgyms': lastgyms,\n            'scanned': loadScanned,\n            'lastslocs': lastslocs,\n            'spawnpoints': loadSpawnpoints,\n            'lastspawns': lastspawns,\n            'swLat': swLat,\n            'swLng': swLng,\n            'neLat': neLat,\n            'neLng': neLng,\n            'oSwLat': oSwLat,\n            'oSwLng': oSwLng,\n            'oNeLat': oNeLat,\n            'oNeLng': oNeLng,\n            'reids': String(reincludedPokemon),\n            'eids': String(excludedPokemon)\n        },\n        dataType: 'json',\n        cache: false,\n        beforeSend: function () {\n            if (rawDataIsLoading) {\n                return false\n            } else {\n                rawDataIsLoading = true\n            }\n        },\n        error: function () {\n            // Display error toast\n            toastr['error']('Please check connectivity or reduce marker settings.', 'Error getting data')\n            toastr.options = {\n                'closeButton': true,\n                'debug': false,\n                'newestOnTop': true,\n                'progressBar': false,\n                'positionClass': 'toast-top-right',\n                'preventDuplicates': true,\n                'onclick': null,\n                'showDuration': '300',\n                'hideDuration': '1000',\n                'timeOut': '25000',\n                'extendedTimeOut': '1000',\n                'showEasing': 'swing',\n                'hideEasing': 'linear',\n                'showMethod': 'fadeIn',\n                'hideMethod': 'fadeOut'\n            }\n        },\n        complete: function () {\n            rawDataIsLoading = false\n        }\n    })\n}\n\nfunction processPokemons(i, item) {\n    if (!Store.get('showPokemon')) {\n        return false // in case the checkbox was unchecked in the meantime.\n    }\n\n    if (!(item['encounter_id'] in mapData.pokemons) &&\n        excludedPokemon.indexOf(item['pokemon_id']) < 0 && item['disappear_time'] > Date.now()) {\n        // add marker to map and item to dict\n        if (item.marker) {\n            item.marker.setMap(null)\n        }\n        if (!item.hidden) {\n            item.marker = setupPokemonMarker(item, map)\n            customizePokemonMarker(item.marker, item)\n            mapData.pokemons[item['encounter_id']] = item\n        }\n    }\n}\n\nfunction processPokestops(i, item) {\n    if (!Store.get('showPokestops')) {\n        return false\n    }\n\n    if (Store.get('showLuredPokestopsOnly') && !item['lure_expiration']) {\n        return true\n    }\n\n    if (!mapData.pokestops[item['pokestop_id']]) { // new pokestop, add marker to map and item to dict\n        if (item.marker && item.marker.rangeCircle) {\n            item.marker.rangeCircle.setMap(null)\n        }\n        if (item.marker) {\n            item.marker.setMap(null)\n        }\n        item.marker = setupPokestopMarker(item)\n        mapData.pokestops[item['pokestop_id']] = item\n    } else { // change existing pokestop marker to unlured/lured\n        var item2 = mapData.pokestops[item['pokestop_id']]\n        if (!!item['lure_expiration'] !== !!item2['lure_expiration']) {\n            if (item2.marker && item2.marker.rangeCircle) {\n                item2.marker.rangeCircle.setMap(null)\n            }\n            item2.marker.setMap(null)\n            item.marker = setupPokestopMarker(item)\n            mapData.pokestops[item['pokestop_id']] = item\n        }\n    }\n}\n\nfunction updatePokestops() {\n    if (!Store.get('showPokestops')) {\n        return false\n    }\n\n    var removeStops = []\n    var currentTime = new Date().getTime()\n\n    // change lured pokestop marker to unlured when expired\n    $.each(mapData.pokestops, function (key, value) {\n        if (value['lure_expiration'] && value['lure_expiration'] < currentTime) {\n            value['lure_expiration'] = null\n            if (value.marker && value.marker.rangeCircle) {\n                value.marker.rangeCircle.setMap(null)\n            }\n            value.marker.setMap(null)\n            value.marker = setupPokestopMarker(value)\n        }\n    })\n\n    // remove unlured stops if show lured only is selected\n    if (Store.get('showLuredPokestopsOnly')) {\n        $.each(mapData.pokestops, function (key, value) {\n            if (!value['lure_expiration']) {\n                removeStops.push(key)\n            }\n        })\n        $.each(removeStops, function (key, value) {\n            if (mapData.pokestops[value] && mapData.pokestops[value].marker) {\n                if (mapData.pokestops[value].marker.rangeCircle) {\n                    mapData.pokestops[value].marker.rangeCircle.setMap(null)\n                }\n                mapData.pokestops[value].marker.setMap(null)\n                delete mapData.pokestops[value]\n            }\n        })\n    }\n}\n\nfunction processGyms(i, item) {\n    var gymLevel = getGymLevel(item)\n    if (!Store.get('showGyms')) {\n        return false // in case the checkbox was unchecked in the meantime.\n    }\n\n    var removeGymFromMap = function (gymid) {\n        if (mapData.gyms[gymid] && mapData.gyms[gymid].marker) {\n            if (mapData.gyms[gymid].marker.rangeCircle) {\n                mapData.gyms[gymid].marker.rangeCircle.setMap(null)\n            }\n            mapData.gyms[gymid].marker.setMap(null)\n            delete mapData.gyms[gymid]\n        }\n    }\n\n    if (Store.get('showOpenGymsOnly')) {\n        if (item.slots_available === 0) {\n            removeGymFromMap(item['gym_id'])\n            return true\n        }\n    }\n\n    if (Store.get('showTeamGymsOnly') && Store.get('showTeamGymsOnly') !== item.team_id) {\n        removeGymFromMap(item['gym_id'])\n        return true\n    }\n\n    if (Store.get('showLastUpdatedGymsOnly')) {\n        var now = new Date()\n        if ((Store.get('showLastUpdatedGymsOnly') * 3600 * 1000) + item.last_scanned < now.getTime()) {\n            removeGymFromMap(item['gym_id'])\n            return true\n        }\n    }\n\n    if (gymLevel < Store.get('minGymLevel')) {\n        removeGymFromMap(item['gym_id'])\n        return true\n    }\n\n    if (gymLevel > Store.get('maxGymLevel')) {\n        removeGymFromMap(item['gym_id'])\n        return true\n    }\n\n    if (item['gym_id'] in mapData.gyms) {\n        item.marker = updateGymMarker(item, mapData.gyms[item['gym_id']].marker)\n    } else { // add marker to map and item to dict\n        item.marker = setupGymMarker(item)\n    }\n    mapData.gyms[item['gym_id']] = item\n}\n\nfunction processScanned(i, item) {\n    if (!Store.get('showScanned')) {\n        return false\n    }\n\n    var scanId = item['latitude'] + '|' + item['longitude']\n\n    if (!(scanId in mapData.scanned)) { // add marker to map and item to dict\n        if (item.marker) {\n            item.marker.setMap(null)\n        }\n        item.marker = setupScannedMarker(item)\n        mapData.scanned[scanId] = item\n    } else {\n        mapData.scanned[scanId].last_modified = item['last_modified']\n    }\n}\n\nfunction updateScanned() {\n    if (!Store.get('showScanned')) {\n        return false\n    }\n\n    $.each(mapData.scanned, function (key, value) {\n        if (map.getBounds().intersects(value.marker.getBounds())) {\n            value.marker.setOptions({\n                fillColor: getColorByDate(value['last_modified'])\n            })\n        }\n    })\n}\n\nfunction processSpawnpoints(i, item) {\n    if (!Store.get('showSpawnpoints')) {\n        return false\n    }\n\n    var id = item['id']\n\n    if (!(id in mapData.spawnpoints)) { // add marker to map and item to dict\n        if (item.marker) {\n            item.marker.setMap(null)\n        }\n        item.marker = setupSpawnpointMarker(item)\n        mapData.spawnpoints[id] = item\n    }\n}\n\nfunction updateSpawnPoints() {\n    if (!Store.get('showSpawnpoints')) {\n        return false\n    }\n\n    var zoom = map.getZoom()\n\n    $.each(mapData.spawnpoints, function (key, value) {\n        if (map.getBounds().contains(value.marker.getPosition())) {\n            var hue = getColorBySpawnTime(value['appear_time'])\n            value.marker.setIcon(changeSpawnIcon(hue, zoom))\n            value.marker.setZIndex(spawnPointIndex(hue))\n        }\n    })\n}\n\nfunction updateMap() {\n    loadRawData().done(function (result) {\n        $.each(result.pokemons, processPokemons)\n        $.each(result.pokestops, processPokestops)\n        $.each(result.gyms, processGyms)\n        $.each(result.scanned, processScanned)\n        $.each(result.spawnpoints, processSpawnpoints)\n        showInBoundsMarkers(mapData.pokemons, 'pokemon')\n        showInBoundsMarkers(mapData.lurePokemons, 'pokemon')\n        showInBoundsMarkers(mapData.gyms, 'gym')\n        showInBoundsMarkers(mapData.pokestops, 'pokestop')\n        showInBoundsMarkers(mapData.scanned, 'scanned')\n        showInBoundsMarkers(mapData.spawnpoints, 'inbound')\n        clearStaleMarkers()\n\n        updateScanned()\n        updateSpawnPoints()\n        updatePokestops()\n\n        if ($('#stats').hasClass('visible')) {\n            countMarkers(map)\n        }\n\n        oSwLat = result.oSwLat\n        oSwLng = result.oSwLng\n        oNeLat = result.oNeLat\n        oNeLng = result.oNeLng\n\n        lastgyms = result.lastgyms\n        lastpokestops = result.lastpokestops\n        lastpokemon = result.lastpokemon\n        lastslocs = result.lastslocs\n        lastspawns = result.lastspawns\n\n        reids = result.reids\n        if (reids instanceof Array) {\n            reincludedPokemon = reids.filter(function (e) {\n                return this.indexOf(e) < 0\n            }, reincludedPokemon)\n        }\n        timestamp = result.timestamp\n        lastUpdateTime = Date.now()\n    })\n}\n\nfunction redrawPokemon(pokemonList) {\n    var skipNotification = true\n    $.each(pokemonList, function (key, value) {\n        var item = pokemonList[key]\n        if (!item.hidden) {\n            if (item.marker.rangeCircle) item.marker.rangeCircle.setMap(null)\n            var newMarker = setupPokemonMarker(item, map, this.marker.animationDisabled)\n            customizePokemonMarker(newMarker, item, skipNotification)\n            item.marker.setMap(null)\n            pokemonList[key].marker = newMarker\n        }\n    })\n}\n\nvar updateLabelDiffTime = function () {\n    $('.label-countdown').each(function (index, element) {\n        var disappearsAt = getTimeUntil(parseInt(element.getAttribute('disappears-at')))\n\n        var hours = disappearsAt.hour\n        var minutes = disappearsAt.min\n        var seconds = disappearsAt.sec\n        var timestring = ''\n\n        if (disappearsAt.ttime < disappearsAt.now) {\n            timestring = '(expired)'\n        } else {\n            timestring = ''\n            if (hours > 0) {\n                timestring = hours + 'hour '\n            }\n\n            timestring += lpad(minutes, 2, 0) + 'min '\n            timestring += lpad(seconds, 2, 0) + 'sec '\n            timestring += ''\n        }\n\n        $(element).text(timestring)\n    })\n}\n\nfunction getPointDistance(pointA, pointB) {\n    return google.maps.geometry.spherical.computeDistanceBetween(pointA, pointB)\n}\n\nfunction sendNotification(title, text, icon, lat, lng) {\n    if (!('Notification' in window)) {\n        return false // Notifications are not present in browser\n    }\n\n    if (Notification.permission !== 'granted') {\n        Notification.requestPermission()\n    } else {\n        var notification = new Notification(title, {\n            icon: icon,\n            body: text,\n            sound: 'sounds/ding.mp3'\n        })\n\n        notification.onclick = function () {\n            window.focus()\n            notification.close()\n\n            centerMap(lat, lng, 20)\n        }\n    }\n}\n\nfunction createMyLocationButton() {\n    var locationContainer = document.createElement('div')\n\n    var locationButton = document.createElement('button')\n    locationButton.style.backgroundColor = '#fff'\n    locationButton.style.border = 'none'\n    locationButton.style.outline = 'none'\n    locationButton.style.width = '28px'\n    locationButton.style.height = '28px'\n    locationButton.style.borderRadius = '2px'\n    locationButton.style.boxShadow = '0 1px 4px rgba(0,0,0,0.3)'\n    locationButton.style.cursor = 'pointer'\n    locationButton.style.marginRight = '10px'\n    locationButton.style.padding = '0px'\n    locationButton.title = 'My Location'\n    locationContainer.appendChild(locationButton)\n\n    var locationIcon = document.createElement('div')\n    locationIcon.style.margin = '5px'\n    locationIcon.style.width = '18px'\n    locationIcon.style.height = '18px'\n    locationIcon.style.backgroundImage = 'url(static/mylocation-sprite-1x.png)'\n    locationIcon.style.backgroundSize = '180px 18px'\n    locationIcon.style.backgroundPosition = '0px 0px'\n    locationIcon.style.backgroundRepeat = 'no-repeat'\n    locationIcon.id = 'current-location'\n    locationButton.appendChild(locationIcon)\n\n    locationButton.addEventListener('click', function () {\n        centerMapOnLocation()\n    })\n\n    locationContainer.index = 1\n    map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(locationContainer)\n\n    google.maps.event.addListener(map, 'dragend', function () {\n        var currentLocation = document.getElementById('current-location')\n        currentLocation.style.backgroundPosition = '0px 0px'\n    })\n}\n\nfunction centerMapOnLocation() {\n    var currentLocation = document.getElementById('current-location')\n    var imgX = '0'\n    var animationInterval = setInterval(function () {\n        if (imgX === '-18') {\n            imgX = '0'\n        } else {\n            imgX = '-18'\n        }\n        currentLocation.style.backgroundPosition = imgX + 'px 0'\n    }, 500)\n    if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n            var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude)\n            locationMarker.setPosition(latlng)\n            map.setCenter(latlng)\n            Store.set('followMyLocationPosition', {\n                lat: position.coords.latitude,\n                lng: position.coords.longitude\n            })\n            clearInterval(animationInterval)\n            currentLocation.style.backgroundPosition = '-144px 0px'\n        })\n    } else {\n        clearInterval(animationInterval)\n        currentLocation.style.backgroundPosition = '0px 0px'\n    }\n}\n\nfunction changeLocation(lat, lng) {\n    var loc = new google.maps.LatLng(lat, lng)\n    changeSearchLocation(lat, lng).done(function () {\n        map.setCenter(loc)\n        searchMarker.setPosition(loc)\n    })\n}\n\nfunction changeSearchLocation(lat, lng) {\n    return $.post('next_loc?lat=' + lat + '&lon=' + lng, {})\n}\n\nfunction centerMap(lat, lng, zoom) {\n    var loc = new google.maps.LatLng(lat, lng)\n\n    map.setCenter(loc)\n\n    if (zoom) {\n        storeZoom = false\n        map.setZoom(zoom)\n    }\n}\n\nfunction i8ln(word) {\n    if ($.isEmptyObject(i8lnDictionary) && language !== 'en' && languageLookups < languageLookupThreshold) {\n        $.ajax({\n            url: 'static/dist/locales/' + language + '.min.json',\n            dataType: 'json',\n            async: false,\n            success: function (data) {\n                i8lnDictionary = data\n            },\n            error: function (jqXHR, status, error) {\n                console.log('Error loading i8ln dictionary: ' + error)\n                languageLookups++\n            }\n        })\n    }\n    if (word in i8lnDictionary) {\n        return i8lnDictionary[word]\n    } else {\n        // Word doesn't exist in dictionary return it as is\n        return word\n    }\n}\n\nfunction updateGeoLocation() {\n    if (navigator.geolocation && (Store.get('geoLocate') || Store.get('followMyLocation'))) {\n        navigator.geolocation.getCurrentPosition(function (position) {\n            var lat = position.coords.latitude\n            var lng = position.coords.longitude\n            var center = new google.maps.LatLng(lat, lng)\n\n            if (Store.get('geoLocate')) {\n                // the search function makes any small movements cause a loop. Need to increase resolution\n                if ((typeof searchMarker !== 'undefined') && (getPointDistance(searchMarker.getPosition(), center) > 40)) {\n                    $.post('next_loc?lat=' + lat + '&lon=' + lng).done(function () {\n                        map.panTo(center)\n                        searchMarker.setPosition(center)\n                    })\n                }\n            }\n            if (Store.get('followMyLocation')) {\n                if ((typeof locationMarker !== 'undefined') && (getPointDistance(locationMarker.getPosition(), center) >= 5)) {\n                    map.panTo(center)\n                    locationMarker.setPosition(center)\n                    Store.set('followMyLocationPosition', {\n                        lat: lat,\n                        lng: lng\n                    })\n                }\n            }\n        })\n    }\n}\n\nfunction createUpdateWorker() {\n    try {\n        if (isMobileDevice() && (window.Worker)) {\n            var updateBlob = new Blob([`onmessage = function(e) {\n                var data = e.data\n                if (data.name === 'backgroundUpdate') {\n                    self.setInterval(function () {self.postMessage({name: 'backgroundUpdate'})}, 5000)\n                }\n            }`])\n\n            var updateBlobURL = window.URL.createObjectURL(updateBlob)\n\n            updateWorker = new Worker(updateBlobURL)\n\n            updateWorker.onmessage = function (e) {\n                var data = e.data\n                if (document.hidden && data.name === 'backgroundUpdate' && Date.now() - lastUpdateTime > 2500) {\n                    updateMap()\n                    updateGeoLocation()\n                }\n            }\n\n            updateWorker.postMessage({\n                name: 'backgroundUpdate'\n            })\n        }\n    } catch (ex) {\n        console.log('Webworker error: ' + ex.message)\n    }\n}\n\nfunction showGymDetails(id) { // eslint-disable-line no-unused-vars\n    var sidebar = document.querySelector('#gym-details')\n    var sidebarClose\n\n    sidebar.classList.add('visible')\n\n    var data = $.ajax({\n        url: 'gym_data',\n        type: 'GET',\n        data: {\n            'id': id\n        },\n        dataType: 'json',\n        cache: false\n    })\n\n    data.done(function (result) {\n        var pokemonHtml = ''\n        if (result.pokemon.length) {\n            if (!isOngoingRaid(result.raid)) {\n                result.pokemon.forEach((pokemon) => {\n                    pokemonHtml += getSidebarGymMember(pokemon)\n                })\n\n                pokemonHtml = `<table><tbody>${pokemonHtml}</tbody></table>`\n            }\n        } else if (result.team_id === 0) {\n            pokemonHtml = ''\n        } else {\n            pokemonHtml = `\n                <center>\n                    Gym Leader:<br>\n                    <i class=\"pokemon-large-sprite n${result.guard_pokemon_id}\"></i><br>\n                    <b>${result.guard_pokemon_name}</b>\n\n                    <p style=\"font-size: .75em; margin: 5px;\">\n                        No additional gym information is available for this gym. Make sure you are collecting <a href=\"https://rocketmap.readthedocs.io/en/develop/extras/gyminfo.html\">detailed gym info.</a>\n                        If you have detailed gym info collection running, this gym's Pokemon information may be out of date.\n                    </p>\n                </center>\n            `\n        }\n\n        var topPart = gymLabel(result, false)\n        sidebar.innerHTML = `${topPart}${pokemonHtml}`\n\n        sidebarClose = document.createElement('a')\n        sidebarClose.href = '#'\n        sidebarClose.className = 'close'\n        sidebarClose.tabIndex = 0\n        sidebar.appendChild(sidebarClose)\n\n        sidebarClose.addEventListener('click', function (event) {\n            event.preventDefault()\n            event.stopPropagation()\n            sidebar.classList.remove('visible')\n        })\n    })\n}\n\nfunction getSidebarGymMember(pokemon) {\n    var perfectPercent = getIv(pokemon.iv_attack, pokemon.iv_defense, pokemon.iv_stamina)\n    var moveEnergy = Math.round(100 / pokemon.move_2_energy)\n\n\n    return `\n                    <tr onclick=toggleGymPokemonDetails(this)>\n                        <td width=\"30px\">\n                            <img class=\"gym pokemon sprite\" src=\"static/icons/${pokemon.pokemon_id}.png\">\n                        </td>\n                        <td>\n                            <div class=\"gym pokemon\" style=\"line-height:0.5em;\">${pokemon.pokemon_name}</div>\n                            <div><img class=\"gym pokemon motivation heart\" src=\"static/images/gym/Heart.png\"> <span class=\"gym pokemon motivation\">${pokemon.cp_decayed}</span></div>\n                        </td>\n                        <td width=\"190\" align=\"center\">\n                            <div class=\"gym pokemon\" style=\"line-height:1em;\">${pokemon.trainer_name} (${pokemon.trainer_level})</div>\n                            <div class=\"gym pokemon\">Deployed ${getDateStr(pokemon.deployment_time)}</div>\n                        </td>\n                        <td width=\"10\">\n                            <!--<a href=\"#\" onclick=\"toggleGymPokemonDetails(this)\">-->\n                                <i class=\"fa fa-angle-double-down\"></i>\n                            <!--</a>-->\n                        </td>\n                    </tr>\n                    <tr class=\"details\">\n                        <td colspan=\"2\">\n                            <div class=\"ivs\">\n                                <div class=\"iv\">\n                                    <div class=\"type\">ATK</div>\n                                    <div class=\"value\">\n                                        ${pokemon.iv_attack}\n                                    </div>\n                                </div>\n                                <div class=\"iv\">\n                                    <div class=\"type\">DEF</div>\n                                    <div class=\"value\">\n                                        ${pokemon.iv_defense}\n                                    </div>\n                                </div>\n                                <div class=\"iv\">\n                                    <div class=\"type\">STA</div>\n                                    <div class=\"value\">\n                                        ${pokemon.iv_stamina}\n                                    </div>\n                                </div>\n                                <div class=\"iv\" style=\"width: 36px;\"\">\n                                    <div class=\"type\">PERFECT</div>\n                                    <div class=\"value\">\n                                        ${perfectPercent.toFixed(0)}<span style=\"font-size: .6em;\">%</span>\n                                    </div>\n                                </div>\n                            </div>\n                        </td>\n                        <td colspan=\"2\">\n                            <div class=\"moves\">\n                                <div class=\"move\">\n                                    <div class=\"name\">\n                                        ${pokemon.move_1_name}\n                                        <div class=\"type ${pokemon.move_1_type['type_en'].toLowerCase()}\">${pokemon.move_1_type['type']}</div>\n                                    </div>\n                                    <div class=\"damage\">\n                                        ${pokemon.move_1_damage}\n                                    </div>\n                                </div>\n                                <br>\n                                <div class=\"move\">\n                                    <div class=\"name\">\n                                        ${pokemon.move_2_name}\n                                        <div class=\"type ${pokemon.move_2_type['type_en'].toLowerCase()}\">${pokemon.move_2_type['type']}</div>\n                                        <div>\n                                            <i class=\"move-bar-sprite move-bar-sprite-${moveEnergy}\"></i>\n                                        </div>\n                                    </div>\n                                    <div class=\"damage\">\n                                        ${pokemon.move_2_damage}\n                                    </div>\n                                </div>\n                            </div>\n                        </td>\n                    </tr>\n                    `\n}\n\nfunction toggleGymPokemonDetails(e) { // eslint-disable-line no-unused-vars\n    e.lastElementChild.firstElementChild.classList.toggle('fa-angle-double-up')\n    e.lastElementChild.firstElementChild.classList.toggle('fa-angle-double-down')\n    e.nextElementSibling.classList.toggle('visible')\n}\n\nfunction getParameterByName(name, url) {\n    if (!url) {\n        url = window.location.search\n    }\n    name = name.replace(/[[\\]]/g, '\\\\$&')\n    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)')\n    var results = regex.exec(url)\n    if (!results) {\n        return null\n    }\n    if (!results[2]) {\n        return ''\n    }\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '))\n}\n\n\n//\n// Page Ready Execution\n//\n\n$(function () {\n    if (!Notification) {\n        console.log('could not load notifications')\n        return\n    }\n\n    if (Notification.permission !== 'granted') {\n        Notification.requestPermission()\n    }\n})\n\n$(function () {\n    // populate Navbar Style menu\n    $selectStyle = $('#map-style')\n\n    // Load Stylenames, translate entries, and populate lists\n    $.getJSON('static/dist/data/mapstyle.min.json').done(function (data) {\n        var styleList = []\n\n        $.each(data, function (key, value) {\n            styleList.push({\n                id: key,\n                text: i8ln(value)\n            })\n        })\n\n        // setup the stylelist\n        $selectStyle.select2({\n            placeholder: 'Select Style',\n            data: styleList,\n            minimumResultsForSearch: Infinity\n        })\n\n        // setup the list change behavior\n        $selectStyle.on('change', function (e) {\n            selectedStyle = $selectStyle.val()\n            map.setMapTypeId(selectedStyle)\n            Store.set('map_style', selectedStyle)\n        })\n\n        // recall saved mapstyle\n        $selectStyle.val(Store.get('map_style')).trigger('change')\n    })\n\n    $selectIconSize = $('#pokemon-icon-size')\n\n    $selectIconSize.select2({\n        placeholder: 'Select Icon Size',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectIconSize.on('change', function () {\n        Store.set('iconSizeModifier', this.value)\n        redrawPokemon(mapData.pokemons)\n        redrawPokemon(mapData.lurePokemons)\n    })\n\n    $switchOpenGymsOnly = $('#open-gyms-only-switch')\n\n    $switchOpenGymsOnly.on('change', function () {\n        Store.set('showOpenGymsOnly', this.checked)\n        lastgyms = false\n        updateMap()\n    })\n\n    $selectTeamGymsOnly = $('#team-gyms-only-switch')\n\n    $selectTeamGymsOnly.select2({\n        placeholder: 'Only Show Gyms For Team',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectTeamGymsOnly.on('change', function () {\n        Store.set('showTeamGymsOnly', this.value)\n        lastgyms = false\n        updateMap()\n    })\n\n    $selectLastUpdateGymsOnly = $('#last-update-gyms-switch')\n\n    $selectLastUpdateGymsOnly.select2({\n        placeholder: 'Only Show Gyms Last Updated',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectLastUpdateGymsOnly.on('change', function () {\n        Store.set('showLastUpdatedGymsOnly', this.value)\n        lastgyms = false\n        updateMap()\n    })\n\n    $selectMinGymLevel = $('#min-level-gyms-filter-switch')\n\n    $selectMinGymLevel.select2({\n        placeholder: 'Minimum Gym Level',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectMinGymLevel.on('change', function () {\n        Store.set('minGymLevel', this.value)\n        lastgyms = false\n        updateMap()\n    })\n\n    $selectMaxGymLevel = $('#max-level-gyms-filter-switch')\n\n    $selectMaxGymLevel.select2({\n        placeholder: 'Maximum Gym Level',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectMaxGymLevel.on('change', function () {\n        Store.set('maxGymLevel', this.value)\n        lastgyms = false\n        updateMap()\n    })\n\n    $selectLuredPokestopsOnly = $('#lured-pokestops-only-switch')\n\n    $selectLuredPokestopsOnly.select2({\n        placeholder: 'Only Show Lured Pokestops',\n        minimumResultsForSearch: Infinity\n    })\n\n    $selectLuredPokestopsOnly.on('change', function () {\n        Store.set('showLuredPokestopsOnly', this.value)\n        lastpokestops = false\n        updateMap()\n    })\n    $switchGymSidebar = $('#gym-sidebar-switch')\n\n    $switchGymSidebar.on('change', function () {\n        Store.set('useGymSidebar', this.checked)\n        lastgyms = false\n        $.each(['gyms'], function (d, dType) {\n            $.each(mapData[dType], function (key, value) {\n                // for any marker you're turning off, you'll want to wipe off the range\n                if (mapData[dType][key].marker.rangeCircle) {\n                    mapData[dType][key].marker.rangeCircle.setMap(null)\n                    delete mapData[dType][key].marker.rangeCircle\n                }\n                mapData[dType][key].marker.setMap(null)\n            })\n            mapData[dType] = {}\n        })\n        updateMap()\n    })\n\n    $selectSearchIconMarker = $('#iconmarker-style')\n    $selectLocationIconMarker = $('#locationmarker-style')\n\n    $.getJSON('static/dist/data/searchmarkerstyle.min.json').done(function (data) {\n        searchMarkerStyles = data\n        var searchMarkerStyleList = []\n\n        $.each(data, function (key, value) {\n            searchMarkerStyleList.push({\n                id: key,\n                text: value.name\n            })\n        })\n\n        $selectSearchIconMarker.select2({\n            placeholder: 'Select Icon Marker',\n            data: searchMarkerStyleList,\n            minimumResultsForSearch: Infinity\n        })\n\n        $selectSearchIconMarker.on('change', function (e) {\n            var selectSearchIconMarker = $selectSearchIconMarker.val()\n            Store.set('searchMarkerStyle', selectSearchIconMarker)\n            updateSearchMarker(selectSearchIconMarker)\n        })\n\n        $selectSearchIconMarker.val(Store.get('searchMarkerStyle')).trigger('change')\n\n        updateSearchMarker(Store.get('lockMarker'))\n\n        $selectLocationIconMarker.select2({\n            placeholder: 'Select Location Marker',\n            data: searchMarkerStyleList,\n            minimumResultsForSearch: Infinity\n        })\n\n        $selectLocationIconMarker.on('change', function (e) {\n            Store.set('locationMarkerStyle', this.value)\n            updateLocationMarker(this.value)\n        })\n\n        $selectLocationIconMarker.val(Store.get('locationMarkerStyle')).trigger('change')\n    })\n})\n\n$(function () {\n    moment.locale(language)\n    function formatState(state) {\n        if (!state.id) {\n            return state.text\n        }\n        var $state = $(\n            '<span><i class=\"pokemon-sprite n' + state.element.value.toString() + '\"></i> ' + state.text + '</span>'\n        )\n        return $state\n    }\n\n    if (Store.get('startAtUserLocation')) {\n        centerMapOnLocation()\n    }\n\n    $.getJSON('static/dist/data/moves.min.json').done(function (data) {\n        moves = data\n    })\n\n    $selectExclude = $('#exclude-pokemon')\n    $selectPokemonNotify = $('#notify-pokemon')\n    $selectRarityNotify = $('#notify-rarity')\n    $textPerfectionNotify = $('#notify-perfection')\n    var numberOfPokemon = 493\n\n    // Load pokemon names and populate lists\n    $.getJSON('static/dist/data/pokemon.min.json').done(function (data) {\n        var pokeList = []\n\n        $.each(data, function (key, value) {\n            if (key > numberOfPokemon) {\n                return false\n            }\n            var _types = []\n            pokeList.push({\n                id: key,\n                text: i8ln(value['name']) + ' - #' + key\n            })\n            value['name'] = i8ln(value['name'])\n            value['rarity'] = i8ln(value['rarity'])\n            $.each(value['types'], function (key, pokemonType) {\n                _types.push({\n                    'type': i8ln(pokemonType['type']),\n                    'color': pokemonType['color']\n                })\n            })\n            value['types'] = _types\n            idToPokemon[key] = value\n        })\n\n        // setup the filter lists\n        $selectExclude.select2({\n            placeholder: i8ln('Select Pokémon'),\n            data: pokeList,\n            templateResult: formatState\n        })\n        $selectPokemonNotify.select2({\n            placeholder: i8ln('Select Pokémon'),\n            data: pokeList,\n            templateResult: formatState\n        })\n        $selectRarityNotify.select2({\n            placeholder: i8ln('Select Rarity'),\n            data: [i8ln('Common'), i8ln('Uncommon'), i8ln('Rare'), i8ln('Very Rare'), i8ln('Ultra Rare')],\n            templateResult: formatState\n        })\n\n        // setup list change behavior now that we have the list to work from\n        $selectExclude.on('change', function (e) {\n            buffer = excludedPokemon\n            excludedPokemon = $selectExclude.val().map(Number)\n            buffer = buffer.filter(function (e) {\n                return this.indexOf(e) < 0\n            }, excludedPokemon)\n            reincludedPokemon = reincludedPokemon.concat(buffer)\n            clearStaleMarkers()\n            Store.set('remember_select_exclude', excludedPokemon)\n        })\n        $selectPokemonNotify.on('change', function (e) {\n            notifiedPokemon = $selectPokemonNotify.val().map(Number)\n            Store.set('remember_select_notify', notifiedPokemon)\n        })\n        $selectRarityNotify.on('change', function (e) {\n            notifiedRarity = $selectRarityNotify.val().map(String)\n            Store.set('remember_select_rarity_notify', notifiedRarity)\n        })\n        $textPerfectionNotify.on('change', function (e) {\n            notifiedMinPerfection = parseInt($textPerfectionNotify.val(), 10)\n            if (isNaN(notifiedMinPerfection) || notifiedMinPerfection <= 0) {\n                notifiedMinPerfection = ''\n            }\n            if (notifiedMinPerfection > 100) {\n                notifiedMinPerfection = 100\n            }\n            $textPerfectionNotify.val(notifiedMinPerfection)\n            Store.set('remember_text_perfection_notify', notifiedMinPerfection)\n        })\n\n        // recall saved lists\n        $selectExclude.val(Store.get('remember_select_exclude')).trigger('change')\n        $selectPokemonNotify.val(Store.get('remember_select_notify')).trigger('change')\n        $selectRarityNotify.val(Store.get('remember_select_rarity_notify')).trigger('change')\n        $textPerfectionNotify.val(Store.get('remember_text_perfection_notify')).trigger('change')\n\n        if (isTouchDevice() && isMobileDevice()) {\n            $('.select2-search input').prop('readonly', true)\n        }\n    })\n\n    // run interval timers to regularly update map and timediffs\n    window.setInterval(updateLabelDiffTime, 1000)\n    window.setInterval(updateMap, 5000)\n    window.setInterval(updateGeoLocation, 1000)\n\n    createUpdateWorker()\n\n    // Wipe off/restore map icons when switches are toggled\n    function buildSwitchChangeListener(data, dataType, storageKey) {\n        return function () {\n            Store.set(storageKey, this.checked)\n            if (this.checked) {\n                // When switch is turned on we asume it has been off, makes sure we dont end up in limbo\n                // Without this there could've been a situation where no markers are on map and only newly modified ones are loaded\n                if (storageKey === 'showPokemon') {\n                    lastpokemon = false\n                } else if (storageKey === 'showGyms') {\n                    lastgyms = false\n                } else if (storageKey === 'showPokestops') {\n                    lastpokestops = false\n                } else if (storageKey === 'showScanned') {\n                    lastslocs = false\n                } else if (storageKey === 'showSpawnpoints') {\n                    lastspawns = false\n                }\n                updateMap()\n            } else {\n                $.each(dataType, function (d, dType) {\n                    $.each(data[dType], function (key, value) {\n                        // for any marker you're turning off, you'll want to wipe off the range\n                        if (data[dType][key].marker.rangeCircle) {\n                            data[dType][key].marker.rangeCircle.setMap(null)\n                            delete data[dType][key].marker.rangeCircle\n                        }\n                        if (storageKey !== 'showRanges') data[dType][key].marker.setMap(null)\n                    })\n                    if (storageKey !== 'showRanges') data[dType] = {}\n                })\n                if (storageKey === 'showRanges') {\n                    updateMap()\n                }\n            }\n        }\n    }\n\n    // Setup UI element interactions\n    $('#gyms-switch').change(function () {\n        var options = {\n            'duration': 500\n        }\n        var wrapper = $('#gym-sidebar-wrapper')\n        if (this.checked) {\n            lastgyms = false\n            wrapper.show(options)\n        } else {\n            lastgyms = false\n            wrapper.hide(options)\n        }\n        var wrapper2 = $('#gyms-filter-wrapper')\n        if (this.checked) {\n            lastgyms = false\n            wrapper2.show(options)\n        } else {\n            lastgyms = false\n            wrapper2.hide(options)\n        }\n        buildSwitchChangeListener(mapData, ['gyms'], 'showGyms').bind(this)()\n    })\n    $('#pokemon-switch').change(function () {\n        buildSwitchChangeListener(mapData, ['pokemons'], 'showPokemon').bind(this)()\n    })\n    $('#scanned-switch').change(function () {\n        buildSwitchChangeListener(mapData, ['scanned'], 'showScanned').bind(this)()\n    })\n    $('#spawnpoints-switch').change(function () {\n        buildSwitchChangeListener(mapData, ['spawnpoints'], 'showSpawnpoints').bind(this)()\n    })\n    $('#ranges-switch').change(buildSwitchChangeListener(mapData, ['gyms', 'pokemons', 'pokestops'], 'showRanges'))\n\n    $('#pokestops-switch').change(function () {\n        var options = {\n            'duration': 500\n        }\n        var wrapper = $('#lured-pokestops-only-wrapper')\n        if (this.checked) {\n            lastpokestops = false\n            wrapper.show(options)\n        } else {\n            lastpokestops = false\n            wrapper.hide(options)\n        }\n        return buildSwitchChangeListener(mapData, ['pokestops'], 'showPokestops').bind(this)()\n    })\n\n    $('#sound-switch').change(function () {\n        Store.set('playSound', this.checked)\n        var options = {\n            'duration': 500\n        }\n        var criesWrapper = $('#pokemoncries')\n        if (this.checked) {\n            criesWrapper.show(options)\n        } else {\n            criesWrapper.hide(options)\n        }\n    })\n\n    $('#cries-switch').change(function () {\n        Store.set('playCries', this.checked)\n    })\n\n    $('#geoloc-switch').change(function () {\n        $('#next-location').prop('disabled', this.checked)\n        $('#next-location').css('background-color', this.checked ? '#e0e0e0' : '#ffffff')\n        if (!navigator.geolocation) {\n            this.checked = false\n        } else {\n            Store.set('geoLocate', this.checked)\n        }\n    })\n\n    $('#lock-marker-switch').change(function () {\n        Store.set('lockMarker', this.checked)\n        searchMarker.setDraggable(!this.checked)\n    })\n\n    $('#search-switch').change(function () {\n        searchControl(this.checked ? 'on' : 'off')\n    })\n\n    $('#start-at-user-location-switch').change(function () {\n        Store.set('startAtUserLocation', this.checked)\n    })\n\n    $('#follow-my-location-switch').change(function () {\n        if (!navigator.geolocation) {\n            this.checked = false\n        } else {\n            Store.set('followMyLocation', this.checked)\n        }\n        locationMarker.setDraggable(!this.checked)\n    })\n\n    $('#scan-here-switch').change(function () {\n        if (this.checked && !Store.get('scanHereAlerted')) {\n            alert('Use this feature carefully ! This button will set the current map center as new search location. This may cause worker to teleport long range.')\n            Store.set('scanHereAlerted', true)\n        }\n        $('#scan-here').toggle(this.checked)\n        Store.set('scanHere', this.checked)\n    })\n\n    if ($('#nav-accordion').length) {\n        $('#nav-accordion').accordion({\n            active: 0,\n            collapsible: true,\n            heightStyle: 'content'\n        })\n    }\n\n    // Initialize dataTable in statistics sidebar\n    //   - turn off sorting for the 'icon' column\n    //   - initially sort 'name' column alphabetically\n\n    $('#pokemonList_table').DataTable({\n        paging: false,\n        searching: false,\n        info: false,\n        errMode: 'throw',\n        'language': {\n            'emptyTable': ''\n        },\n        'columns': [\n            { 'orderable': false },\n            null,\n            null,\n            null\n        ]\n    }).order([1, 'asc'])\n})\n"]}
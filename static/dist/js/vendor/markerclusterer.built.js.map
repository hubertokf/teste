{"version":3,"sources":["../../../js/vendor/markerclusterer.js"],"names":["MarkerClusterer","map","opt_markers","opt_options","extend","google","maps","OverlayView","map_","markers_","clusters_","markersCluster_","markersUniqueID","sizes","styles_","cssClass_","cssDefaultClass_","setIndex_","ready_","options","gridSize_","undefined","minClusterSize_","ignoreHiddenMarkers_","maxZoom_","imagePath_","MARKER_CLUSTER_IMAGE_PATH_","imageExtension_","MARKER_CLUSTER_IMAGE_EXTENSION_","zoomOnClick_","averageCenter_","onMouseoverCluster_","onMouseoutCluster_","drawCluster_","hideCluster_","showCluster_","onAddCluster_","onRemoveCluster_","setupStyles_","setMap","prevZoom_","getZoom","that","event","addListener","zoom","resetViewport","redraw","length","addMarkers","prototype","obj1","obj2","object","property","apply","onAdd","setReady_","draw","i","size","url","push","height","width","fitMapToMarkers","markers","getMarkers","bounds","LatLngBounds","marker","getPosition","fitBounds","setStyles","styles","getStyles","isZoomOnClick","isAverageCenter","getTotalMarkers","setMaxZoom","maxZoom","getMaxZoom","getMarkersCluster","uniqueID","calculator_","numStyles","index","count","dv","parseInt","Math","min","text","setCalculator","calculator","getCalculator","opt_nodraw","pushMarkerTo_","isAdded","repaint","addMarker","removeMarker_","indexOf","m","splice","removeMarker","removed","removeMarkers","r","ready","createClusters_","getTotalClusters","getClusters","getMap","getGridSize","setGridSize","getMinClusterSize","setMinClusterSize","getExtendedBounds","projection","getProjection","tr","LatLng","getNorthEast","lat","lng","bl","getSouthWest","trPix","fromLatLngToDivPixel","x","y","blPix","ne","fromDivPixelToLatLng","sw","isMarkerInBounds_","contains","clearMarkers","opt_hide","cluster","remove","oldClusters","slice","window","setTimeout","distanceBetweenPoints_","p1","p2","R","dLat","PI","dLon","a","sin","cos","c","atan2","sqrt","d","addToClosestCluster_","distance","clusterToAddTo","pos","clusterIndex","center","getCenter","isMarkerInClusterBounds","Cluster","mapBounds","getBounds","getVisible","markerClusterer","markerClusterer_","center_","bounds_","clusterIcon_","ClusterIcon","isMarkerAlreadyAdded","calculateBounds_","l","len","updateIcon","getMarkerClusterer","getSize","mz","hide","sums","setCenter","setSums","show","opt_padding","padding_","cluster_","div_","sums_","visible_","triggerClusterClick","trigger","triggerClusterMouseover","triggerClusterMouseout","defaultClusterOnAdd","clusterIcon","document","createElement","getPosFromLatLng_","style","cssText","createCss","innerHTML","className","panes","getPanes","overlayMouseTarget","appendChild","isDragging","isMouseDown","addDomListener","latlng","iconAnchor_","width_","height_","defaultClusterDraw","top","left","defaultClusterHide","display","defaultClusterShow","onRemove","defaultClusterOnRemove","parentNode","removeChild","text_","index_","useStyle","max","url_","textColor_","anchor_","textSize_","backgroundPosition_","backgroundPosition","txtColor","txtSize","join"],"mappings":"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","file":"markerclusterer.built.js","sourcesContent":["// ==ClosureCompiler==\n// @compilation_level ADVANCED_OPTIMIZATIONS\n// @externs_url https://raw.githubusercontent.com/google/closure-compiler/master/contrib/externs/maps/google_maps_api_v3.js\n// ==/ClosureCompiler==\n\n/**\n * @name Gmaps MarkerClusterer for Google Maps v3\n * @version version 1.2.0\n * @author Luke Mahe\n * @author Sebastian HÃ¶sl <sebastian.codes@gmail.com>\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of\n * markers.\n * This is a v3 implementation of the v2 MarkerClusterer\n * {@link http://gmaps-utility-library-dev.googlecode.com/svn/tags/markerclusterer/}\n * ></a>.\n */\n\n/**\n * @license\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * A Marker Clusterer that clusters markers.\n *\n * @param {google.maps.Map} map The Google map to attach to.\n * @param {Array.<google.maps.Marker>=} opt_markers Optional markers to add to\n *   the cluster.\n * @param {Object=} opt_options support the following options:\n *     'gridSize': (number) The grid size of a cluster in pixels.\n *     'maxZoom': (number) The maximum zoom level that a marker can be part of a\n *                cluster.\n *     'zoomOnClick': (boolean) Whether the default behaviour of clicking on a\n *                    cluster is to zoom into it.\n *     'averageCenter': (boolean) Whether the center of each cluster should be\n *                      the average of all markers in the cluster.\n *     'minimumClusterSize': (number) The minimum number of markers to be in a\n *                           cluster before the markers are hidden and a count\n *                           is shown.\n *     'ignoreHiddenMarkers': (boolean) Whether to ignore markers that are not\n *                            visible or count and cluster them anyway\n *     'styles': (Array) An array of objects with these properties:\n *       'url': (string) The image url.\n *       'height': (number) The image height.\n *       'width': (number) The image width.\n *       'anchor': (Array) The anchor position of the label text.\n *       'textColor': (string) The text color.\n *       'textSize': (number) The text size.\n *       'backgroundPosition': (string) The position of the backgound x, y.\n *       'iconAnchor': (Array) The anchor position of the icon x, y.\n *       'cssClass': (string) One or more CSS class for styling this marker.\n *     'onMouseoverCluster': (function) The event handler used for onmouseover\n *                           each cluster\n *     'onMouseoutCluster': (function) The event handler used for onmouseout\n *                          each cluster\n *     'drawCluster': (function) Custom draw method for ClusterIcon\n *     'hideCluster': (function) Custom hide method for ClusterIcon\n *     'showCluster': (function) Custom hide method for ClusterIcon\n *     'onAddCluster': (function) Custom onAdd method for ClusterIcon\n *     'onRemoveCluster': (function) Custom onRemove method for ClusterIcon\n * @constructor\n * @extends google.maps.OverlayView\n */\nfunction MarkerClusterer(map, opt_markers, opt_options) {\n    // MarkerClusterer implements google.maps.OverlayView interface. We use the\n    // extend function to extend MarkerClusterer with google.maps.OverlayView\n    // because it might not always be available when the code is defined so we\n    // look for it at the last possible moment. If it doesn't exist now then\n    // there is no point going ahead :)\n    this.extend(MarkerClusterer, google.maps.OverlayView);\n    this.map_ = map;\n\n    /**\n     * @type {Array.<google.maps.Marker>}\n     * @private\n     */\n    this.markers_ = [];\n\n    /**\n     *  @type {Array.<Cluster>}\n     */\n    this.clusters_ = [];\n\n    /**\n     * @type {Object} holding information about every markers cluster\n     */\n    this.markersCluster_ = {};\n\n    /**\n     * @type {Number} Unique markers ID\n     */\n    this.markersUniqueID = 1;\n\n    this.sizes = [53, 56, 66, 78, 90];\n\n    /**\n     * @private\n     */\n    this.styles_ = [];\n\n    /**\n     * @private\n     */\n    this.cssClass_ = '';\n\n    /**\n     * @private\n     * @type {string} Set a default Cluster Class\n     */\n    this.cssDefaultClass_ = 'cluster';\n\n    /**\n     * @private\n     */\n    this.setIndex_ = 0;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.ready_ = false;\n\n    var options = opt_options || {};\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.gridSize_ = (options['gridSize'] !== undefined) ? options['gridSize'] : 60;\n\n    /**\n     * @private\n     */\n    this.minClusterSize_ = options['minimumClusterSize'] || 2;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.ignoreHiddenMarkers_ = options['ignoreHiddenMarkers'] || false;\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.maxZoom_ = options['maxZoom'] || null;\n\n    this.styles_ = options['styles'] || [];\n\n    this.cssClass_ = options['cssClass'] || null;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.imagePath_ = options['imagePath'] ||\n        this.MARKER_CLUSTER_IMAGE_PATH_;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.imageExtension_ = options['imageExtension'] ||\n        this.MARKER_CLUSTER_IMAGE_EXTENSION_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.zoomOnClick_ = true;\n\n    if (options['zoomOnClick'] != undefined) {\n        this.zoomOnClick_ = options['zoomOnClick'];\n    }\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.averageCenter_ = false;\n\n    if (options['averageCenter'] != undefined) {\n        this.averageCenter_ = options['averageCenter'];\n    }\n\n    /**\n     * @type {function}\n     * @private\n     */\n    this.onMouseoverCluster_ = options['onMouseoverCluster'];\n\n    /**\n     * @type {function}\n     * @private\n     */\n    this.onMouseoutCluster_ = options['onMouseoutCluster'];\n\n    /**\n     * @type {function}\n     * @private\n     */\n    this.drawCluster_ = options['drawCluster'];\n\n    /**\n     * @type {function}\n     * @private\n     */\n    this.hideCluster_ = options['hideCluster'];\n\n    /**\n     * @type {function}\n     * @private\n     */\n    this.showCluster_ = options['showCluster'];\n\n    /**\n     * @type {function}\n     * @private\n     */\n    this.onAddCluster_ = options['onAddCluster'];\n\n    /**\n     * @type {function}\n     * @private\n     */\n    this.onRemoveCluster_ = options['onRemoveCluster'];\n\n    this.setupStyles_();\n\n    this.setMap(map);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.prevZoom_ = this.map_.getZoom();\n\n    // Add the map event listeners\n    var that = this;\n    google.maps.event.addListener(this.map_, 'zoom_changed', function() {\n        var zoom = that.map_.getZoom();\n\n        if (that.prevZoom_ != zoom) {\n            that.prevZoom_ = zoom;\n            that.resetViewport();\n        }\n    });\n\n    google.maps.event.addListener(this.map_, 'idle', function() {\n        that.redraw();\n    });\n\n    // Finally, add the markers\n    if (opt_markers && opt_markers.length) {\n        this.addMarkers(opt_markers, false);\n    }\n}\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_ = 'https://raw.githubusercontent.com/gmaps-marker-clusterer/gmaps-marker-clusterer/master/images/m';\n\n\n/**\n * The marker cluster image path.\n *\n * @type {string}\n * @private\n */\nMarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_ = 'png';\n\n\n/**\n * Extends a objects prototype by anothers.\n *\n * @param {Object} obj1 The object to be extended.\n * @param {Object} obj2 The object to extend with.\n * @return {Object} The new extended object.\n * @ignore\n */\nMarkerClusterer.prototype.extend = function(obj1, obj2) {\n    return (function(object) {\n        for (var property in object.prototype) {\n            this.prototype[property] = object.prototype[property];\n        }\n        return this;\n    }).apply(obj1, [obj2]);\n};\n\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.onAdd = function() {\n    this.setReady_(true);\n};\n\n/**\n * Implementaion of the interface method.\n * @ignore\n */\nMarkerClusterer.prototype.draw = function() {};\n\n/**\n * Sets up the styles object.\n *\n * @private\n */\nMarkerClusterer.prototype.setupStyles_ = function() {\n    if (this.styles_.length) {\n        return;\n    }\n\n    for (var i = 0, size; size = this.sizes[i]; i++) {\n        var url = '';\n        if (typeof this.imagePath_ === 'function') {\n            url = this.imagePath_(i, size);\n        } else {\n            url = this.imagePath_ + (i + 1) + '.' + this.imageExtension_;\n        }\n        this.styles_.push({\n            url: url,\n            height: size,\n            width: size\n        });\n    }\n};\n\n/**\n *  Fit the map to the bounds of the markers in the clusterer.\n */\nMarkerClusterer.prototype.fitMapToMarkers = function() {\n    var markers = this.getMarkers();\n    var bounds = new google.maps.LatLngBounds();\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        bounds.extend(marker.getPosition());\n    }\n\n    this.map_.fitBounds(bounds);\n};\n\n\n/**\n *  Sets the styles.\n *\n *  @param {Object} styles The style to set.\n */\nMarkerClusterer.prototype.setStyles = function(styles) {\n    this.styles_ = styles;\n};\n\n\n/**\n *  Gets the styles.\n *\n *  @return {Object} The styles object.\n */\nMarkerClusterer.prototype.getStyles = function() {\n    return this.styles_;\n};\n\n\n/**\n * Whether zoom on click is set.\n *\n * @return {boolean} True if zoomOnClick_ is set.\n */\nMarkerClusterer.prototype.isZoomOnClick = function() {\n    return this.zoomOnClick_;\n};\n\n/**\n * Whether average center is set.\n *\n * @return {boolean} True if averageCenter_ is set.\n */\nMarkerClusterer.prototype.isAverageCenter = function() {\n    return this.averageCenter_;\n};\n\n\n/**\n *  Returns the array of markers in the clusterer.\n *\n *  @return {Array.<google.maps.Marker>} The markers.\n */\nMarkerClusterer.prototype.getMarkers = function() {\n    return this.markers_;\n};\n\n\n/**\n *  Returns the number of markers in the clusterer\n *\n *  @return {Number} The number of markers.\n */\nMarkerClusterer.prototype.getTotalMarkers = function() {\n    return this.markers_.length;\n};\n\n\n/**\n *  Sets the max zoom for the clusterer.\n *\n *  @param {number} maxZoom The max zoom level.\n */\nMarkerClusterer.prototype.setMaxZoom = function(maxZoom) {\n    this.maxZoom_ = maxZoom;\n};\n\n\n/**\n *  Gets the max zoom for the clusterer.\n *\n *  @return {number} The max zoom level.\n */\nMarkerClusterer.prototype.getMaxZoom = function() {\n    return this.maxZoom_;\n};\n\n/**\n * Gets marker's cluster object based on given marker\n *\n * @param  {google.maps.Marker} marker\n *\n * @return {Cluster}\n */\nMarkerClusterer.prototype.getMarkersCluster = function(marker) {\n    return this.clusters_[this.markersCluster_[marker.uniqueID]];\n};\n\n/**\n *  The function for calculating the cluster icon image.\n *\n *  @param {Array.<google.maps.Marker>} markers The markers in the clusterer.\n *  @param {number} numStyles The number of styles available.\n *  @return {Object} A object properties: 'text' (string) and 'index' (number).\n *  @private\n */\nMarkerClusterer.prototype.calculator_ = function(markers, numStyles) {\n    var index = 0;\n    var count = markers.length;\n    var dv = count;\n    while (dv !== 0) {\n        dv = parseInt(dv / 10, 10);\n        index++;\n    }\n\n    index = Math.min(index, numStyles);\n\n    return {\n        text: count,\n        index: index\n    };\n};\n\n\n/**\n * Set the calculator function.\n *\n * @param {function(Array, number)} calculator The function to set as the\n *     calculator. The function should return a object properties:\n *     'text' (string) and 'index' (number).\n *\n */\nMarkerClusterer.prototype.setCalculator = function(calculator) {\n    this.calculator_ = calculator;\n};\n\n\n/**\n * Get the calculator function.\n *\n * @return {function(Array, number)} the calculator function.\n */\nMarkerClusterer.prototype.getCalculator = function() {\n    return this.calculator_;\n};\n\n\n/**\n * Add an array of markers to the clusterer.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarkers = function(markers, opt_nodraw) {\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        this.pushMarkerTo_(marker);\n    }\n    if (!opt_nodraw) {\n        this.redraw();\n    }\n};\n\n\n/**\n * Pushes a marker to the clusterer.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.pushMarkerTo_ = function(marker) {\n    marker.isAdded = false;\n    if (marker['draggable']) {\n        // If the marker is draggable add a listener so we update the clusters on\n        // the drag end.\n        var that = this;\n        google.maps.event.addListener(marker, 'dragend', function() {\n            marker.isAdded = false;\n            that.repaint();\n        });\n    }\n    marker.uniqueID = this.markersUniqueID;\n    this.markersUniqueID++;\n    this.markers_.push(marker);\n};\n\n\n/**\n * Adds a marker to the clusterer and redraws if needed.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @param {boolean=} opt_nodraw Whether to redraw the clusters.\n */\nMarkerClusterer.prototype.addMarker = function(marker, opt_nodraw) {\n    this.pushMarkerTo_(marker);\n    if (!opt_nodraw) {\n        this.redraw();\n    }\n};\n\n\n/**\n * Removes a marker and returns true if removed, false if not\n *\n * @param {google.maps.Marker} marker The marker to remove\n * @return {boolean} Whether the marker was removed or not\n * @private\n */\nMarkerClusterer.prototype.removeMarker_ = function(marker) {\n    var index = -1;\n    if (this.markers_.indexOf) {\n        index = this.markers_.indexOf(marker);\n    } else {\n        for (var i = 0, m; m = this.markers_[i]; i++) {\n            if (m == marker) {\n                index = i;\n                break;\n            }\n        }\n    }\n\n    if (index == -1) {\n        // Marker is not in our list of markers.\n        return false;\n    }\n\n    marker.setMap(null);\n\n    this.markers_.splice(index, 1);\n    delete this.markersCluster_[marker.uniqueID];\n\n    return true;\n};\n\n\n/**\n * Remove a marker from the cluster.\n *\n * @param {google.maps.Marker} marker The marker to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n * @return {boolean} True if the marker was removed.\n */\nMarkerClusterer.prototype.removeMarker = function(marker, opt_nodraw) {\n    var removed = this.removeMarker_(marker);\n\n    if (!opt_nodraw && removed) {\n        this.resetViewport();\n        this.redraw();\n        return true;\n    } else {\n        return false;\n    }\n};\n\n\n/**\n * Removes an array of markers from the cluster.\n *\n * @param {Array.<google.maps.Marker>} markers The markers to remove.\n * @param {boolean=} opt_nodraw Optional boolean to force no redraw.\n */\nMarkerClusterer.prototype.removeMarkers = function(markers, opt_nodraw) {\n    var removed = false;\n\n    for (var i = markers.length; i >= 0; i--) {\n        var marker = markers[i];\n        var r = this.removeMarker_(marker);\n        removed = removed || r;\n    }\n\n    if (!opt_nodraw && removed) {\n        this.resetViewport();\n        this.redraw();\n        return true;\n    }\n};\n\n\n/**\n * Sets the clusterer's ready state.\n *\n * @param {boolean} ready The state.\n * @private\n */\nMarkerClusterer.prototype.setReady_ = function(ready) {\n    if (!this.ready_) {\n        this.ready_ = ready;\n        this.createClusters_();\n    }\n};\n\n\n/**\n * Returns the number of clusters in the clusterer.\n *\n * @return {number} The number of clusters.\n */\nMarkerClusterer.prototype.getTotalClusters = function() {\n    return this.clusters_.length;\n};\n\n\n/**\n *  Returns the list of clusters in the clusterer\n *\n *  @return {Array.<Cluster>} The list of clusters.\n */\nMarkerClusterer.prototype.getClusters = function() {\n    return this.clusters_;\n};\n\n\n/**\n * Returns the google map that the clusterer is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nMarkerClusterer.prototype.getMap = function() {\n    return this.map_;\n};\n\n\n/**\n * Sets the google map that the clusterer is associated with.\n *\n * @param {google.maps.Map} map The map.\n */\nMarkerClusterer.prototype.setMap = function(map) {\n    this.map_ = map;\n};\n\n\n/**\n * Returns the size of the grid.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getGridSize = function() {\n    return this.gridSize_;\n};\n\n\n/**\n * Sets the size of the grid.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setGridSize = function(size) {\n    this.gridSize_ = size;\n};\n\n\n/**\n * Returns the min cluster size.\n *\n * @return {number} The grid size.\n */\nMarkerClusterer.prototype.getMinClusterSize = function() {\n    return this.minClusterSize_;\n};\n\n/**\n * Sets the min cluster size.\n *\n * @param {number} size The grid size.\n */\nMarkerClusterer.prototype.setMinClusterSize = function(size) {\n    this.minClusterSize_ = size;\n};\n\n\n/**\n * Extends a bounds object by the grid size.\n *\n * @param {google.maps.LatLngBounds} bounds The bounds to extend.\n * @return {google.maps.LatLngBounds} The extended bounds.\n */\nMarkerClusterer.prototype.getExtendedBounds = function(bounds) {\n    var projection = this.getProjection();\n\n    // Turn the bounds into latlng.\n    var tr = new google.maps.LatLng(bounds.getNorthEast().lat(),\n        bounds.getNorthEast().lng());\n    var bl = new google.maps.LatLng(bounds.getSouthWest().lat(),\n        bounds.getSouthWest().lng());\n\n    // Convert the points to pixels and the extend out by the grid size.\n    var trPix = projection.fromLatLngToDivPixel(tr);\n    trPix.x += this.gridSize_;\n    trPix.y -= this.gridSize_;\n\n    var blPix = projection.fromLatLngToDivPixel(bl);\n    blPix.x -= this.gridSize_;\n    blPix.y += this.gridSize_;\n\n    // Convert the pixel points back to LatLng\n    var ne = projection.fromDivPixelToLatLng(trPix);\n    var sw = projection.fromDivPixelToLatLng(blPix);\n\n    // Extend the bounds to contain the new bounds.\n    bounds.extend(ne);\n    bounds.extend(sw);\n\n    return bounds;\n};\n\n\n/**\n * Determins if a marker is contained in a bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @param {google.maps.LatLngBounds} bounds The bounds to check against.\n * @return {boolean} True if the marker is in the bounds.\n * @private\n */\nMarkerClusterer.prototype.isMarkerInBounds_ = function(marker, bounds) {\n    return bounds.contains(marker.getPosition());\n};\n\n\n/**\n * Clears all clusters and markers from the clusterer.\n */\nMarkerClusterer.prototype.clearMarkers = function() {\n    this.resetViewport(true);\n\n    // Set the markers a empty array.\n    this.markers_ = [];\n    this.markersCluster_ = {};\n    this.markersUniqueID = 1;\n};\n\n\n/**\n * Clears all existing clusters and recreates them.\n * @param {boolean} opt_hide To also hide the marker.\n */\nMarkerClusterer.prototype.resetViewport = function(opt_hide) {\n    // Remove all the clusters\n    for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n        cluster.remove();\n    }\n\n    // Reset the markers to not be added and to be invisible.\n    for (var i = 0, marker; marker = this.markers_[i]; i++) {\n        marker.isAdded = false;\n        if (opt_hide) {\n            marker.setMap(null);\n        }\n    }\n\n    this.clusters_ = [];\n    this.markersCluster_ = {};\n    this.markersUniqueID = 1;\n};\n\n/**\n *\n */\nMarkerClusterer.prototype.repaint = function() {\n    var oldClusters = this.clusters_.slice();\n    this.clusters_.length = 0;\n    this.resetViewport();\n    this.redraw();\n\n    // Remove the old clusters.\n    // Do it in a timeout so the other clusters have been drawn first.\n    window.setTimeout(function() {\n        for (var i = 0, cluster; cluster = oldClusters[i]; i++) {\n            cluster.remove();\n        }\n    }, 0);\n};\n\n\n/**\n * Redraws the clusters.\n */\nMarkerClusterer.prototype.redraw = function() {\n    this.createClusters_();\n};\n\n\n/**\n * Calculates the distance between two latlng locations in km.\n * @see http://www.movable-type.co.uk/scripts/latlong.html\n *\n * @param {google.maps.LatLng} p1 The first lat lng point.\n * @param {google.maps.LatLng} p2 The second lat lng point.\n * @return {number} The distance between the two points in km.\n * @private\n */\nMarkerClusterer.prototype.distanceBetweenPoints_ = function(p1, p2) {\n    if (!p1 || !p2) {\n        return 0;\n    }\n\n    var R = 6371; // Radius of the Earth in km\n    var dLat = (p2.lat() - p1.lat()) * Math.PI / 180;\n    var dLon = (p2.lng() - p1.lng()) * Math.PI / 180;\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n        Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) *\n        Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    var d = R * c;\n    return d;\n};\n\n\n/**\n * Add a marker to a cluster, or creates a new cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @private\n */\nMarkerClusterer.prototype.addToClosestCluster_ = function(marker) {\n    var distance = 40000; // Some large number\n    var clusterToAddTo = null;\n    var pos = marker.getPosition();\n    var clusterIndex = null;\n    for (var i = 0, cluster; cluster = this.clusters_[i]; i++) {\n        var center = cluster.getCenter();\n        if (center) {\n            var d = this.distanceBetweenPoints_(center, marker.getPosition());\n            if (d < distance) {\n                distance = d;\n                clusterToAddTo = cluster;\n                clusterIndex = i;\n            }\n        }\n    }\n\n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n        clusterToAddTo.addMarker(marker);\n    } else {\n        var cluster = new Cluster(this);\n        cluster.addMarker(marker);\n        this.clusters_.push(cluster);\n        clusterIndex = this.clusters_.length - 1;\n    }\n\n    if (marker.isAdded) {\n        this.markersCluster_[marker.uniqueID] = clusterIndex;\n    }\n};\n\n\n/**\n * Creates the clusters.\n *\n * @private\n */\nMarkerClusterer.prototype.createClusters_ = function() {\n    if (!this.ready_) {\n        return;\n    }\n\n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    var mapBounds = new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),\n        this.map_.getBounds().getNorthEast());\n    var bounds = this.getExtendedBounds(mapBounds);\n\n    for (var i = 0, marker; marker = this.markers_[i]; i++) {\n        if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds) && (!this.ignoreHiddenMarkers_ || marker.getVisible())) {\n            this.addToClosestCluster_(marker);\n        }\n    }\n};\n\n\n/**\n * A cluster that contains markers.\n *\n * @param {MarkerClusterer} markerClusterer The markerclusterer that this\n *     cluster is associated with.\n * @constructor\n * @ignore\n */\nfunction Cluster(markerClusterer) {\n    this.markerClusterer_ = markerClusterer;\n    this.map_ = markerClusterer.getMap();\n    this.gridSize_ = markerClusterer.getGridSize();\n    this.minClusterSize_ = markerClusterer.getMinClusterSize();\n    this.averageCenter_ = markerClusterer.isAverageCenter();\n    this.center_ = null;\n    this.markers_ = [];\n    this.bounds_ = null;\n    this.clusterIcon_ = new ClusterIcon(this, markerClusterer.getStyles(),\n        markerClusterer.getGridSize());\n}\n\n/**\n * Determins if a marker is already added to the cluster.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker is already added.\n */\nCluster.prototype.isMarkerAlreadyAdded = function(marker) {\n    if (this.markers_.indexOf) {\n        return this.markers_.indexOf(marker) != -1;\n    } else {\n        for (var i = 0, m; m = this.markers_[i]; i++) {\n            if (m == marker) {\n                return true;\n            }\n        }\n    }\n    return false;\n};\n\n\n/**\n * Add a marker the cluster.\n *\n * @param {google.maps.Marker} marker The marker to add.\n * @return {boolean} True if the marker was added.\n */\nCluster.prototype.addMarker = function(marker) {\n    if (this.isMarkerAlreadyAdded(marker)) {\n        return false;\n    }\n\n    if (!this.center_) {\n        this.center_ = marker.getPosition();\n        this.calculateBounds_();\n    } else {\n        if (this.averageCenter_) {\n            var l = this.markers_.length + 1;\n            var lat = (this.center_.lat() * (l - 1) + marker.getPosition().lat()) / l;\n            var lng = (this.center_.lng() * (l - 1) + marker.getPosition().lng()) / l;\n            this.center_ = new google.maps.LatLng(lat, lng);\n            this.calculateBounds_();\n        }\n    }\n\n    marker.isAdded = true;\n    this.markers_.push(marker);\n\n    var len = this.markers_.length;\n    if (len < this.minClusterSize_ && marker.getMap() != this.map_) {\n        // Min cluster size not reached so show the marker.\n        marker.setMap(this.map_);\n    }\n\n    if (len == this.minClusterSize_) {\n        // Hide the markers that were showing.\n        for (var i = 0; i < len; i++) {\n            this.markers_[i].setMap(null);\n        }\n    }\n\n    if (len >= this.minClusterSize_) {\n        marker.setMap(null);\n    }\n\n    this.updateIcon();\n    return true;\n};\n\n\n/**\n * Returns the marker clusterer that the cluster is associated with.\n *\n * @return {MarkerClusterer} The associated marker clusterer.\n */\nCluster.prototype.getMarkerClusterer = function() {\n    return this.markerClusterer_;\n};\n\n\n/**\n * Returns the bounds of the cluster.\n *\n * @return {google.maps.LatLngBounds} the cluster bounds.\n */\nCluster.prototype.getBounds = function() {\n    var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    var markers = this.getMarkers();\n    for (var i = 0, marker; marker = markers[i]; i++) {\n        bounds.extend(marker.getPosition());\n    }\n    return bounds;\n};\n\n\n/**\n * Removes the cluster\n */\nCluster.prototype.remove = function() {\n    this.clusterIcon_.remove();\n    this.markers_.length = 0;\n    delete this.markers_;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {number} The cluster center.\n */\nCluster.prototype.getSize = function() {\n    return this.markers_.length;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {Array.<google.maps.Marker>} The cluster center.\n */\nCluster.prototype.getMarkers = function() {\n    return this.markers_;\n};\n\n\n/**\n * Returns the center of the cluster.\n *\n * @return {google.maps.LatLng} The cluster center.\n */\nCluster.prototype.getCenter = function() {\n    return this.center_;\n};\n\n\n/**\n * Calculated the extended bounds of the cluster with the grid.\n *\n * @private\n */\nCluster.prototype.calculateBounds_ = function() {\n    var bounds = new google.maps.LatLngBounds(this.center_, this.center_);\n    this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n};\n\n\n/**\n * Determines if a marker lies in the clusters bounds.\n *\n * @param {google.maps.Marker} marker The marker to check.\n * @return {boolean} True if the marker lies in the bounds.\n */\nCluster.prototype.isMarkerInClusterBounds = function(marker) {\n    return this.bounds_.contains(marker.getPosition());\n};\n\n\n/**\n * Returns the map that the cluster is associated with.\n *\n * @return {google.maps.Map} The map.\n */\nCluster.prototype.getMap = function() {\n    return this.map_;\n};\n\n\n/**\n * Updates the cluster icon\n */\nCluster.prototype.updateIcon = function() {\n    var zoom = this.map_.getZoom();\n    var mz = this.markerClusterer_.getMaxZoom();\n\n    if (mz && zoom > mz) {\n        // The zoom is greater than our max zoom so show all the markers in cluster.\n        for (var i = 0, marker; marker = this.markers_[i]; i++) {\n            marker.setMap(this.map_);\n        }\n        return;\n    }\n\n    if (this.markers_.length < this.minClusterSize_) {\n        // Min cluster size not yet reached.\n        this.clusterIcon_.hide();\n        return;\n    }\n\n    var numStyles = this.markerClusterer_.getStyles().length;\n    var sums = this.markerClusterer_.getCalculator()(this.markers_, numStyles);\n    this.clusterIcon_.setCenter(this.center_);\n    this.clusterIcon_.setSums(sums);\n    this.clusterIcon_.show();\n};\n\n\n/**\n * A cluster icon\n *\n * @param {Cluster} cluster The cluster to be associated with.\n * @param {Object} styles An object that has style properties:\n *     'url': (string) The image url.\n *     'height': (number) The image height.\n *     'width': (number) The image width.\n *     'anchor': (Array) The anchor position of the label text.\n *     'textColor': (string) The text color.\n *     'textSize': (number) The text size.\n *     'backgroundPosition: (string) The background postition x, y.\n * @param {number=} opt_padding Optional padding to apply to the cluster icon.\n * @constructor\n * @extends google.maps.OverlayView\n * @ignore\n */\nfunction ClusterIcon(cluster, styles, opt_padding) {\n    cluster.getMarkerClusterer().extend(ClusterIcon, google.maps.OverlayView);\n\n    this.styles_ = styles;\n    this.padding_ = opt_padding || 0;\n    this.cluster_ = cluster;\n    this.center_ = null;\n    this.map_ = cluster.getMap();\n    this.div_ = null;\n    this.sums_ = null;\n    this.visible_ = false;\n\n    this.setMap(this.map_);\n}\n\n/**\n * Triggers the clusterclick event and zoom's if the option is set.\n *\n * @param {google.maps.MouseEvent} event The event to propagate\n */\nClusterIcon.prototype.triggerClusterClick = function(event) {\n    var markerClusterer = this.cluster_.getMarkerClusterer();\n\n    // Trigger the clusterclick event.\n    google.maps.event.trigger(markerClusterer, 'clusterclick', this.cluster_, event);\n\n    if (markerClusterer.isZoomOnClick()) {\n        // Zoom into the cluster.\n        this.map_.fitBounds(this.cluster_.getBounds());\n    }\n};\n\n/**\n * Triggers the clustermouseover event.\n * @param {google.maps.MouseEvent} event The event to propagate\n */\nClusterIcon.prototype.triggerClusterMouseover = function(event) {\n    var markerClusterer = this.cluster_.getMarkerClusterer();\n\n    // Trigger the clustermouseover event.\n    google.maps.event.trigger(markerClusterer, 'clustermouseover', this.cluster_, event);\n\n    if (typeof this.cluster_.markerClusterer_.onMouseoverCluster_ === 'function') {\n        this.cluster_.markerClusterer_.onMouseoverCluster_(this, event);\n    }\n};\n\n/**\n * Triggers the clustermouseout event.\n * @param {google.maps.MouseEvent} event The event to propagate\n */\nClusterIcon.prototype.triggerClusterMouseout = function(event) {\n    var markerClusterer = this.cluster_.getMarkerClusterer();\n\n    // Trigger the clustermouseout event.\n    google.maps.event.trigger(markerClusterer, 'clustermouseout', this.cluster_, event);\n\n    if (typeof this.cluster_.markerClusterer_.onMouseoutCluster_ === 'function') {\n        this.cluster_.markerClusterer_.onMouseoutCluster_(this, event);\n    }\n};\n\n/**\n * Adding the cluster icon to the dom.\n * @ignore\n */\nClusterIcon.prototype.onAdd = function () {\n    if (typeof this.cluster_.markerClusterer_.onAddCluster_ === 'function') {\n        this.cluster_.markerClusterer_.onAddCluster_(this);\n    }\n    else {\n        defaultClusterOnAdd(this);\n    }\n};\n\n/**\n * Default onAdd function\n * @ignore\n */\nfunction defaultClusterOnAdd(clusterIcon) {\n    clusterIcon.div_ = document.createElement('DIV');\n    if (clusterIcon.visible_) {\n        var pos = clusterIcon.getPosFromLatLng_(clusterIcon.center_);\n        clusterIcon.div_.style.cssText = clusterIcon.createCss(pos);\n        clusterIcon.div_.innerHTML = clusterIcon.sums_.text;\n        var markerClusterer = clusterIcon.cluster_.getMarkerClusterer();\n\n        if (markerClusterer.cssClass_) {\n            clusterIcon.div_.className = markerClusterer.cssClass_ + ' ' + markerClusterer.cssDefaultClass_ + clusterIcon.setIndex_;\n        } else {\n            clusterIcon.div_.className = markerClusterer.cssDefaultClass_ + clusterIcon.setIndex_;\n        }\n    }\n\n    var panes = clusterIcon.getPanes();\n\n    panes.overlayMouseTarget.appendChild(clusterIcon.div_);\n\n    var isDragging = false;\n    var isMouseDown = false;\n\n    google.maps.event.addDomListener(clusterIcon.div_, 'click', function(event) {\n        // Only perform click when not preceded by a drag\n        if (!isDragging) {\n            clusterIcon.triggerClusterClick(event);\n        }\n    });\n\n    google.maps.event.addDomListener(clusterIcon.div_, 'mousedown', function() {\n        isDragging = false;\n        isMouseDown = true;\n    });\n\n    google.maps.event.addDomListener(clusterIcon.div_, 'mouseup', function() {\n        isDragging = false;\n        isMouseDown = false;\n    });\n\n    google.maps.event.addDomListener(clusterIcon.div_, 'mousemove', function() {\n        if (isMouseDown) {\n            isDragging = true;\n        }\n    });\n\n    google.maps.event.addDomListener(clusterIcon.div_, 'mouseover', function(event) {\n        clusterIcon.triggerClusterMouseover(event);\n    });\n\n    google.maps.event.addDomListener(clusterIcon.div_, 'mouseout', function(event) {\n        clusterIcon.triggerClusterMouseout(event);\n    });\n}\n\n/**\n * Returns the position to place the div dending on the latlng.\n *\n * @param {google.maps.LatLng} latlng The position in latlng.\n * @return {google.maps.Point} The position in pixels.\n * @private\n */\nClusterIcon.prototype.getPosFromLatLng_ = function(latlng) {\n    var pos = this.getProjection().fromLatLngToDivPixel(latlng);\n\n    if (typeof this.iconAnchor_ === 'object' && this.iconAnchor_.length === 2) {\n        pos.x -= this.iconAnchor_[0];\n        pos.y -= this.iconAnchor_[1];\n    } else {\n        pos.x -= parseInt(this.width_ / 2, 10);\n        pos.y -= parseInt(this.height_ / 2, 10);\n    }\n    return pos;\n};\n\n\n/**\n * Draw the icon.\n * @ignore\n */\nClusterIcon.prototype.draw = function () {\n    if (typeof this.cluster_.markerClusterer_.drawCluster_ === 'function') {\n        this.cluster_.markerClusterer_.drawCluster_(this);\n    }\n    else {\n        defaultClusterDraw(this);\n    }\n};\n\n/**\n * Default draw function\n * @ignore\n */\nfunction defaultClusterDraw(clusterIcon) {\n    if (clusterIcon.visible_) {\n        var pos = clusterIcon.getPosFromLatLng_(clusterIcon.center_);\n        clusterIcon.div_.style.top = pos.y + 'px';\n        clusterIcon.div_.style.left = pos.x + 'px';\n    }\n}\n\n\n/**\n * Hide the icon.\n */\nClusterIcon.prototype.hide = function() {\n    if (typeof this.cluster_.markerClusterer_.hideCluster_ === 'function') {\n        this.cluster_.markerClusterer_.hideCluster_(this);\n    }\n    else {\n        defaultClusterHide(this);\n    }\n};\n\n\n/**\n * Default hide function\n * @ignore\n */\nfunction defaultClusterHide(clusterIcon) {\n    if (clusterIcon.div_) {\n        clusterIcon.div_.style.display = 'none';\n    }\n    clusterIcon.visible_ = false;\n}\n\n\n/**\n * Position and show the icon.\n */\nClusterIcon.prototype.show = function() {\n    if (typeof this.cluster_.markerClusterer_.showCluster_ === 'function') {\n        this.cluster_.markerClusterer_.showCluster_(this);\n    }\n    else {\n        defaultClusterShow(this);\n    }\n};\n\n/**\n * Default show function\n * @ignore\n */\nfunction defaultClusterShow(clusterIcon) {\n    if (clusterIcon.div_) {\n        var pos = clusterIcon.getPosFromLatLng_(clusterIcon.center_);\n        clusterIcon.div_.style.cssText = clusterIcon.createCss(pos);\n        clusterIcon.div_.style.display = '';\n    }\n    clusterIcon.visible_ = true;\n}\n\n\n/**\n * Remove the icon from the map\n */\nClusterIcon.prototype.remove = function() {\n    this.setMap(null);\n};\n\n\n/**\n * Implementation of the onRemove interface.\n * @ignore\n */\nClusterIcon.prototype.onRemove = function() {\n    if (typeof this.cluster_.markerClusterer_.onRemoveCluster_ === 'function') {\n        this.cluster_.markerClusterer_.onRemoveCluster_(this);\n    }\n    else {\n        defaultClusterOnRemove(this);\n    }\n};\n\n/**\n * Default onRemove function\n * @ignore\n */\nfunction defaultClusterOnRemove(clusterIcon) {\n    if (clusterIcon.div_ && clusterIcon.div_.parentNode) {\n        clusterIcon.hide();\n        clusterIcon.div_.parentNode.removeChild(clusterIcon.div_);\n        clusterIcon.div_ = null;\n    }\n}\n\n\n/**\n * Set the sums of the icon.\n *\n * @param {Object} sums The sums containing:\n *   'text': (string) The text to display in the icon.\n *   'index': (number) The style index of the icon.\n */\nClusterIcon.prototype.setSums = function(sums) {\n    this.sums_ = sums;\n    this.text_ = sums.text;\n    this.index_ = sums.index;\n    if (this.div_) {\n        this.div_.innerHTML = sums.text;\n    }\n\n    this.useStyle();\n};\n\n\n/**\n * Sets the icon to the the styles.\n */\nClusterIcon.prototype.useStyle = function() {\n    var index = Math.max(0, this.sums_.index - 1);\n    index = Math.min(this.styles_.length - 1, index);\n    var style = this.styles_[index];\n    this.url_ = style['url'];\n    this.height_ = style['height'];\n    this.width_ = style['width'];\n    this.textColor_ = style['textColor'];\n    this.anchor_ = style['anchor'];\n    this.textSize_ = style['textSize'];\n    this.backgroundPosition_ = style['backgroundPosition'];\n    this.iconAnchor_ = style['iconAnchor'];\n    this.setIndex_ = index;\n};\n\n\n/**\n * Sets the center of the icon.\n *\n * @param {google.maps.LatLng} center The latlng to set as the center.\n */\nClusterIcon.prototype.setCenter = function(center) {\n    this.center_ = center;\n};\n\n\n/**\n * Create the css text based on the position of the icon.\n *\n * @param {google.maps.Point} pos The position.\n * @return {string} The css style text.\n */\nClusterIcon.prototype.createCss = function(pos) {\n    var style = [];\n    var markerClusterer = this.cluster_.getMarkerClusterer();\n\n    if (!markerClusterer.cssClass_) {\n        style.push('background-image:url(' + this.url_ + ');');\n        var backgroundPosition = this.backgroundPosition_ ? this.backgroundPosition_ : '0 0';\n        style.push('background-position:' + backgroundPosition + ';');\n\n        if (typeof this.anchor_ === 'object') {\n            if (typeof this.anchor_[0] === 'number' && this.anchor_[0] > 0 &&\n                this.anchor_[0] < this.height_) {\n                style.push('height:' + (this.height_ - this.anchor_[0]) +\n                    'px; padding-top:' + this.anchor_[0] + 'px;');\n            } else if (typeof this.anchor_[0] === 'number' && this.anchor_[0] < 0 &&\n                -this.anchor_[0] < this.height_) {\n                style.push('height:' + this.height_ + 'px; line-height:' + (this.height_ + this.anchor_[0]) +\n                    'px;');\n            } else {\n                style.push('height:' + this.height_ + 'px; line-height:' + this.height_ +\n                    'px;');\n            }\n            if (typeof this.anchor_[1] === 'number' && this.anchor_[1] > 0 &&\n                this.anchor_[1] < this.width_) {\n                style.push('width:' + (this.width_ - this.anchor_[1]) +\n                    'px; padding-left:' + this.anchor_[1] + 'px;');\n            } else {\n                style.push('width:' + this.width_ + 'px; text-align:center;');\n            }\n        } else {\n            style.push('height:' + this.height_ + 'px; line-height:' +\n                this.height_ + 'px; width:' + this.width_ + 'px; text-align:center;');\n        }\n\n        var txtColor = this.textColor_ ? this.textColor_ : 'black';\n        var txtSize = this.textSize_ ? this.textSize_ : 11;\n\n        style.push('cursor:pointer; top:' + pos.y + 'px; left:' +\n            pos.x + 'px; color:' + txtColor + '; position:absolute; font-size:' +\n            txtSize + 'px; font-family:Arial,sans-serif; font-weight:bold');\n\n    } else {\n        style.push('top:' + pos.y + 'px; left:' + pos.x + 'px;');\n    }\n\n    return style.join('');\n};\n\n\n// Export Symbols for Closure\n// If you are not going to compile with closure then you can remove the\n// code below.\nwindow['MarkerClusterer'] = MarkerClusterer;\nMarkerClusterer.prototype['addMarker'] = MarkerClusterer.prototype.addMarker;\nMarkerClusterer.prototype['addMarkers'] = MarkerClusterer.prototype.addMarkers;\nMarkerClusterer.prototype['clearMarkers'] =\n    MarkerClusterer.prototype.clearMarkers;\nMarkerClusterer.prototype['fitMapToMarkers'] =\n    MarkerClusterer.prototype.fitMapToMarkers;\nMarkerClusterer.prototype['getCalculator'] =\n    MarkerClusterer.prototype.getCalculator;\nMarkerClusterer.prototype['getGridSize'] =\n    MarkerClusterer.prototype.getGridSize;\nMarkerClusterer.prototype['getExtendedBounds'] =\n    MarkerClusterer.prototype.getExtendedBounds;\nMarkerClusterer.prototype['getMap'] = MarkerClusterer.prototype.getMap;\nMarkerClusterer.prototype['getMarkers'] = MarkerClusterer.prototype.getMarkers;\nMarkerClusterer.prototype['getMaxZoom'] = MarkerClusterer.prototype.getMaxZoom;\nMarkerClusterer.prototype['getMarkersCluster'] = MarkerClusterer.prototype.getMarkersCluster;\nMarkerClusterer.prototype['getStyles'] = MarkerClusterer.prototype.getStyles;\nMarkerClusterer.prototype['getTotalClusters'] =\n    MarkerClusterer.prototype.getTotalClusters;\nMarkerClusterer.prototype['getTotalMarkers'] =\n    MarkerClusterer.prototype.getTotalMarkers;\nMarkerClusterer.prototype['redraw'] = MarkerClusterer.prototype.redraw;\nMarkerClusterer.prototype['removeMarker'] =\n    MarkerClusterer.prototype.removeMarker;\nMarkerClusterer.prototype['removeMarkers'] =\n    MarkerClusterer.prototype.removeMarkers;\nMarkerClusterer.prototype['resetViewport'] =\n    MarkerClusterer.prototype.resetViewport;\nMarkerClusterer.prototype['repaint'] =\n    MarkerClusterer.prototype.repaint;\nMarkerClusterer.prototype['setCalculator'] =\n    MarkerClusterer.prototype.setCalculator;\nMarkerClusterer.prototype['setGridSize'] =\n    MarkerClusterer.prototype.setGridSize;\nMarkerClusterer.prototype['setMaxZoom'] =\n    MarkerClusterer.prototype.setMaxZoom;\nMarkerClusterer.prototype['onAdd'] = MarkerClusterer.prototype.onAdd;\nMarkerClusterer.prototype['draw'] = MarkerClusterer.prototype.draw;\n\nCluster.prototype['getCenter'] = Cluster.prototype.getCenter;\nCluster.prototype['getSize'] = Cluster.prototype.getSize;\nCluster.prototype['getMarkers'] = Cluster.prototype.getMarkers;\n\nClusterIcon.prototype['onAdd'] = ClusterIcon.prototype.onAdd;\nClusterIcon.prototype['draw'] = ClusterIcon.prototype.draw;\nClusterIcon.prototype['onRemove'] = ClusterIcon.prototype.onRemove;"]}